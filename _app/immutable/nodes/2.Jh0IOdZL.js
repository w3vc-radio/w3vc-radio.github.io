var ha=Object.defineProperty;var qt=a=>{throw TypeError(a)};var wa=(a,e,l)=>e in a?ha(a,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[e]=l;var Xt=(a,e,l)=>wa(a,typeof e!="symbol"?e+"":e,l),ya=(a,e,l)=>e.has(a)||qt("Cannot "+l);var St=(a,e,l)=>(ya(a,e,"read from private field"),l?l.call(a):e.get(a)),Jt=(a,e,l)=>e.has(a)?qt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,l);import{a as A,t as G,c as tt,n as ht}from"../chunks/disclose-version.CKmHfcQQ.js";import{G as ia,F as Lt,w as Sa,a4 as Ta,l as ka,ap as na,q as xe,M as Tt,J as Da,ak as oa,K as Ma,L as Gt,N as kt,v as ot,aq as mt,H as ca,m as da,I as Ia,Q as Ea,C as Vt,ar as Rt,as as Kt,at as Nt,au as La,a3 as Oa,y as Qt,av as Pa,aj as Aa,aw as Ca,o as Ra,a5 as Na,ag as za,ab as Fa,ax as Ha,ae as Ba,O as zt,b as ja,P as Ft,e as Ve,ay as Ua,az as Ya,aA as qa,aB as Xa,aC as Ja,an as j,g as t,A as _,a as Ga,p as Ue,j as i,k as s,s as c,t as F,i as Ye,f as ue,aD as Dt,aE as Va,h as Se,aF as Mt,aG as We}from"../chunks/runtime.CCv0MKOs.js";import{d as st,e as Ot,a as R}from"../chunks/store.ClLhcO0h.js";import{c as Ka,a as U,p as Z,i as he,b as vt}from"../chunks/props.Bz_VZYiK.js";import{i as Qa}from"../chunks/lifecycle.BcNaCV50.js";function $e(a,e=!1){return pt(a,new Map)}function pt(a,e,l,r){if(typeof a=="object"&&a!==null){const v=e.get(a);if(v!==void 0)return v;if(a instanceof Map)return new Map(a);if(a instanceof Set)return new Set(a);if(ia(a)){const u=[];e.set(a,u);for(let g=0;g<a.length;g+=1)u.push(pt(a[g],e));return u}if(Lt(a)===Sa){const u={};e.set(a,u);for(var n in a)u[n]=pt(a[n],e);return u}if(a instanceof Date)return structuredClone(a);if(typeof a.toJSON=="function")return pt(a.toJSON(),e)}if(a instanceof EventTarget)return a;try{return structuredClone(a)}catch{return a}}let It=null;function ce(a,e){return e}function Wa(a,e,l,r){for(var n=[],v=e.length,u=0;u<v;u++)Pa(e[u].e,n,!0);var g=v>0&&n.length===0&&l!==null;if(g){var y=l.parentNode;Aa(y),y.append(l),r.clear(),Ke(a,e[0].prev,e[v-1].next)}Ca(n,()=>{for(var w=0;w<v;w++){var S=e[w];g||(r.delete(S.k),Ke(a,S.prev,S.next)),Ra(S.e,!g)}})}function ne(a,e,l,r,n,v=null){var u=a,g={flags:e,items:new Map,first:null},y=(e&na)!==0;if(y){var w=a;u=xe?Tt(Na(w)):w.appendChild(Ta())}xe&&Da();var S=null,O=!1;ka(()=>{var b=l(),D=ia(b)?b:b==null?[]:oa(b),p=D.length;if(O&&p===0)return;O=p===0;let C=!1;if(xe){var L=u.data===Ma;L!==(p===0)&&(u=Gt(),Tt(u),kt(!1),C=!0)}if(xe){for(var m=null,H,B=0;B<p;B++){if(ot.nodeType===8&&ot.data===za){u=ot,C=!0,kt(!1);break}var k=D[B],E=r(k,B);H=va(ot,g,m,null,k,E,B,n,e),g.items.set(E,H),m=H}p>0&&Tt(Gt())}if(!xe){var ae=Fa;Za(D,g,u,n,e,(ae.f&mt)!==0,r)}v!==null&&(p===0?S?ca(S):S=da(()=>v(u)):S!==null&&Ia(S,()=>{S=null})),C&&kt(!0),l()}),xe&&(u=ot)}function Za(a,e,l,r,n,v,u){var T,M,N,z;var g=(n&Ha)!==0,y=(n&(Rt|Nt))!==0,w=a.length,S=e.items,O=e.first,b=O,D,p=null,C,L=[],m=[],H,B,k,E;if(g)for(E=0;E<w;E+=1)H=a[E],B=u(H,E),k=S.get(B),k!==void 0&&((T=k.a)==null||T.measure(),(C??(C=new Set)).add(k));for(E=0;E<w;E+=1){if(H=a[E],B=u(H,E),k=S.get(B),k===void 0){var ae=b?b.e.nodes_start:l;p=va(ae,e,p,p===null?e.first:p.next,H,B,E,r,n),S.set(B,p),L=[],m=[],b=p.next;continue}if(y&&$a(k,H,E,n),k.e.f&mt&&(ca(k.e),g&&((M=k.a)==null||M.unfix(),(C??(C=new Set)).delete(k))),k!==b){if(D!==void 0&&D.has(k)){if(L.length<m.length){var W=m[0],V;p=W.prev;var K=L[0],oe=L[L.length-1];for(V=0;V<L.length;V+=1)Wt(L[V],W,l);for(V=0;V<m.length;V+=1)D.delete(m[V]);Ke(e,K.prev,oe.next),Ke(e,p,K),Ke(e,oe,W),b=W,p=oe,E-=1,L=[],m=[]}else D.delete(k),Wt(k,b,l),Ke(e,k.prev,k.next),Ke(e,k,p===null?e.first:p.next),Ke(e,p,k),p=k;continue}for(L=[],m=[];b!==null&&b.k!==B;)(v||!(b.e.f&mt))&&(D??(D=new Set)).add(b),m.push(b),b=b.next;if(b===null)continue;k=b}L.push(k),p=k,b=k.next}if(b!==null||D!==void 0){for(var $=D===void 0?[]:oa(D);b!==null;)(v||!(b.e.f&mt))&&$.push(b),b=b.next;var ge=$.length;if(ge>0){var x=n&na&&w===0?l:null;if(g){for(E=0;E<ge;E+=1)(N=$[E].a)==null||N.measure();for(E=0;E<ge;E+=1)(z=$[E].a)==null||z.fix()}Wa(e,$,x,S)}}g&&Ea(()=>{var Q;if(C!==void 0)for(k of C)(Q=k.a)==null||Q.apply()}),Vt.first=e.first&&e.first.e,Vt.last=p&&p.e}function $a(a,e,l,r){r&Rt&&Kt(a.v,e),r&Nt?Kt(a.i,l):a.i=l}function va(a,e,l,r,n,v,u,g,y){var w=It;try{var S=(y&Rt)!==0,O=(y&La)===0,b=S?O?Oa(n):Qt(n):n,D=y&Nt?Qt(u):u,p={i:D,v:b,k:v,a:null,e:null,prev:l,next:r};return It=p,p.e=da(()=>g(a,b,D),xe),p.e.prev=l&&l.e,p.e.next=r&&r.e,l===null?e.first=p:(l.next=p,l.e.next=p.e),r!==null&&(r.prev=p,r.e.prev=p.e),p}finally{It=w}}function Wt(a,e,l){for(var r=a.next?a.next.e.nodes_start:l,n=e?e.e.nodes_start:l,v=a.e.nodes_start;v!==r;){var u=Ba(v);n.before(v),v=u}}function Ke(a,e,l){e===null?a.first=l:(e.next=l,e.e.next=l&&l.e),l!==null&&(l.prev=e,l.e.prev=e&&e.e)}function Pt(a,e,l){zt(()=>{var r=ja(()=>e(a,l==null?void 0:l())||{});if(l&&(r!=null&&r.update)){var n=!1,v={};Ft(()=>{var u=l();Ve(u),n&&Ua(v,u)&&(v=u,r.update(u))}),n=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}let Zt=!1;function ua(){Zt||(Zt=!0,document.addEventListener("reset",a=>{Promise.resolve().then(()=>{var e;if(!a.defaultPrevented)for(const l of a.target.elements)(e=l.__on_r)==null||e.call(l)})},{capture:!0}))}function Ce(a){if(xe){var e=!1,l=()=>{if(!e){if(e=!0,a.hasAttribute("value")){var r=a.value;te(a,"value",null),a.value=r}if(a.hasAttribute("checked")){var n=a.checked;te(a,"checked",null),a.checked=n}}};a.__on_r=l,Ya(l),ua()}}function el(a,e){var l=a.__attributes??(a.__attributes={});l.value===(l.value=e)||a.value===e&&(e!==0||a.nodeName!=="PROGRESS")||(a.value=e)}function te(a,e,l,r){var n=a.__attributes??(a.__attributes={});xe&&(n[e]=a.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&a.nodeName==="LINK")||n[e]!==(n[e]=l)&&(e==="style"&&"__styles"in a&&(a.__styles={}),e==="loading"&&(a[qa]=l),l==null?a.removeAttribute(e):typeof l!="string"&&tl(a).includes(e)?a[e]=l:a.setAttribute(e,l))}var $t=new Map;function tl(a){var e=$t.get(a.nodeName);if(e)return e;$t.set(a.nodeName,e=[]);for(var l,r=Lt(a),n=Element.prototype;n!==r;){l=Xa(r);for(var v in l)l[v].set&&e.push(v);r=Lt(r)}return e}function al(a,e){var l=a.__className,r=fa(e);xe&&a.getAttribute("class")===r?a.__className=r:(l!==r||xe&&a.getAttribute("class")!==r)&&(r===""?a.removeAttribute("class"):a.setAttribute("class",r),a.__className=r)}function Te(a,e){var l=a.__className,r=fa(e);xe&&a.className===r?a.__className=r:(l!==r||xe&&a.className!==r)&&(e==null?a.removeAttribute("class"):a.className=r,a.__className=r)}function fa(a){return a??""}function le(a,e,l){if(l){if(a.classList.contains(e))return;a.classList.add(e)}else{if(!a.classList.contains(e))return;a.classList.remove(e)}}function Ht(a,e,l,r=l){a.addEventListener(e,l);const n=a.__on_r;n?a.__on_r=()=>{n(),r()}:a.__on_r=r,ua()}function et(a,e,l=e){var r=Ja();Ht(a,"input",()=>{var n=ea(a)?ta(a.value):a.value;l(n),r&&n!==(n=e())&&(a.value=n??"")}),Ft(()=>{var n=e();if(xe&&a.defaultValue!==a.value){l(a.value);return}ea(a)&&n===ta(a.value)||a.type==="date"&&!n&&!a.value||n!==a.value&&(a.value=n??"")})}function Et(a,e,l=e){Ht(a,"change",()=>{var r=a.checked;l(r)}),e()==null&&l(!1),Ft(()=>{var r=e();a.checked=!!r})}function ea(a){var e=a.type;return e==="number"||e==="range"}function ta(a){return a===""?null:+a}function ga(a,e,l){if(a.multiple)return rl(a,e);for(var r of a.options){var n=dt(r);if(Ka(n,e)){r.selected=!0;return}}(!l||e!==void 0)&&(a.selectedIndex=-1)}function ll(a,e){zt(()=>{var l=new MutationObserver(()=>{var r=a.__value;ga(a,r)});return l.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{l.disconnect()}})}function Qe(a,e,l=e){var r=!0;Ht(a,"change",()=>{var n;if(a.multiple)n=[].map.call(a.querySelectorAll(":checked"),dt);else{var v=a.querySelector(":checked");n=v&&dt(v)}l(n)}),zt(()=>{var n=e();if(ga(a,n,r),r&&n===void 0){var v=a.querySelector(":checked");v!==null&&(n=dt(v),l(n))}a.__value=n,r=!1}),ll(a)}function rl(a,e){for(var l of a.options)l.selected=~e.indexOf(dt(l))}function dt(a){return"__value"in a?a.__value:a.value}const sl=300,il=4,nl="none";function ol(a){return Array.isArray(a)?a:[a]}function ct(a,e,l){return a.addEventListener(e,l),()=>a.removeEventListener(e,l)}function cl(a,e){return e.filter(l=>a.pointerId!==l.pointerId)}function bt(a,e,l,r,n){const v=a.getBoundingClientRect(),u=Math.round(l.clientX-v.left),g=Math.round(l.clientY-v.top);a.dispatchEvent(new CustomEvent(`${e}${n}`,{detail:{event:l,pointersCount:r.length,target:l.target,x:u,y:g}}))}function _a(a,e,l,r,n,v=nl){e.style.touchAction=ol(v).join(" ");let u=[];function g(w){u.push(w),bt(e,a,w,u,"down"),r==null||r(u,w);const S=w.pointerId;function O(m){S===m.pointerId&&(u=cl(m,u),u.length||b(),bt(e,a,m,u,"up"),n==null||n(u,m))}function b(){D(),p(),C(),L()}const D=ct(e,"pointermove",m=>{u=u.map(H=>m.pointerId===H.pointerId?m:H),bt(e,a,m,u,"move"),l==null||l(u,m)}),p=ct(e,"lostpointercapture",m=>{O(m)}),C=ct(e,"pointerup",m=>{O(m)}),L=ct(e,"pointerleave",m=>{u=[],b(),bt(e,a,m,u,"up"),n==null||n(u,m)})}const y=ct(e,"pointerdown",g);return{destroy:()=>{y()}}}function dl(a,e){const l={composed:!1,timeframe:sl,triggerBeforeFinished:!1,spread:il,touchAction:"auto",...e};a.style.userSelect="none",a.oncontextmenu=L=>{L.preventDefault()};const r="press";let n,v,u;const g={x:0,y:0};let y,w=!1,S=!1;function O(L,m,H){if(Math.abs(L-v)<l.spread&&Math.abs(m-u)<l.spread&&Date.now()-n>l.timeframe){const B=a.getBoundingClientRect(),k=Math.round(L-B.left),E=Math.round(m-B.top);S=!0,a.dispatchEvent(new CustomEvent(r,{detail:{x:k,y:E,target:H.target,pointerType:H.pointerType}}))}}function b(L,m){clearTimeout(y),w||O(m.clientX,m.clientY,m)}function D(L,m){return g.x=m.clientX,g.y=m.clientY,S}function p(L,m){S=!1,v=m.clientX,u=m.clientY,n=Date.now(),w=!1,g.x=m.clientX,g.y=m.clientY,l.triggerBeforeFinished&&(y=setTimeout(()=>{w=!0,O(g.x,g.y,m)},l.timeframe+1))}const C=_a(r,a,D,p,b,l.touchAction);return l.composed?{onMove:D,onDown:p,onUp:b}:{destroy:()=>{C.destroy(),clearTimeout(y)}}}var ft;class vl{constructor(e,l){Jt(this,ft,j());Xt(this,"key","");this.key=e,this.value=l;{const r=localStorage.getItem(e);r&&(this.value=this.deserialize(r))}Ga(()=>{localStorage.setItem(this.key,this.serialize(this.value))})}get value(){return t(St(this,ft))}set value(e){_(St(this,ft),U(e))}update(){{const e=localStorage.getItem(this.key);e&&(this.value=this.deserialize(e))}}serialize(e){return JSON.stringify(e)}deserialize(e){return JSON.parse(e)}}ft=new WeakMap;function ut(a,e){return new vl(a,e)}const ul=(a,e,l)=>{e(!e()),l.operatorLastIdUpdateFunc(new Date().toUTCString())};var fl=G('<div class="text-light bg-base-300 flex flex-initial flex-row justify-around space-x-1 rounded-sm px-1 shadow-xl"><div class="my-auto font-mono text-xl italic"> </div> <div class="my-auto font-mono text-xl"> </div></div>'),gl=(a,e,l,r)=>{t(e)?(l(),_(e,!1)):r()},_l=G('<div class="grid shrink-0 basis-1/3 grid-flow-row grid-cols-12 py-3"><div class="col-span-1 [text-orientation:sideways] [writing-mode:vertical-lr]"><div class="rotate-180 touch-manipulation text-center"><div class="flex flex-row items-center justify-center gap-3"><div class="inline-grid *:[grid-area:1/1]"><div></div></div> <p> </p></div></div></div> <div class="col-span-7 grid grid-flow-col grid-cols-2 grid-rows-3 gap-x-1 gap-y-1.5 overflow-hidden p-1"></div> <div class="col-span-4 mx-2 flex flex-col space-y-1"><div class="flex grow-10 flex-row gap-2"><button class="btn h-full grow text-lg"> </button></div> <button> </button></div></div>');function bl(a,e){Ue(e,!0);let l=Z(e,"followRecorded",15),r=Z(e,"didID",15),n=ue(()=>e.buggies.length.valueOf()),v=ue(()=>!l()&&t(n)<Math.min(6,e.maxBuggies-e.prevFollowRecorded)),u=ue(()=>!l()&&e.prevFollowRecorded),g=j(!1),y=x=>{t(v)&&(e.buggies.push({time:new Date,number:e.buggies.length+1}),e.undoList.push(e.idx))},w=x=>{t(u)&&(e.buggies.push({time:new Date,number:"F"}),l(!0),e.undoList.push(e.idx))};const S=()=>{l()&&l(!1),e.buggies.pop()};let O=x=>{if(x.number=="1"||x.number=="F"){let T=x.time-e.startTime,M=Math.ceil(T/1e3)%60;return`@${Math.max(Math.floor(T/1e3-M),0)/60}:${String(M).padStart(2,"0")}`}else{let T=e.buggies[e.buggies.indexOf(x)-1],M=x.time-T.time,N=Math.floor(M/1e3)%60;return`+${Math.max(Math.floor(M/1e3-N),0)/60}:${String(Math.floor(N)).padStart(2,"0")}`}},b=x=>{let T=!1,M=!1,N=new Date;return e.config.value.operators.forEach(z=>{if(z.station==x){let Q=Math.max(Math.floor((N-new Date(z.lastId))/6e4),0);z.isPrimary&&Q>=12?T=!0:Q>=12&&(M=!0)}}),T?"status-error":M?"status-warning":"status-success"},D=j(U(b(e.name)));setTimeout(()=>_(D,U(b(e.name))),6e4);var p=_l(),C=i(p),L=i(C),m=i(L),H=i(m),B=i(H);s(H);var k=c(H,2),E=i(k,!0);s(k),s(m),s(L),s(C);var ae=c(C,2);ne(ae,21,()=>e.buggies,x=>x.number,(x,T)=>{var M=fl(),N=i(M),z=i(N,!0);s(N);var Q=c(N,2),ee=i(Q,!0);F(()=>R(ee,O(t(T)))),s(Q),s(M),F(()=>R(z,t(T).number)),A(x,M)}),s(ae);var W=c(ae,2),V=i(W),K=i(V);K.__click=[gl,g,w,y];var oe=i(K);s(K),Pt(K,(x,T)=>dl(x,T),()=>({timeframe:300,triggerBeforeFinished:!0})),s(V);var $=c(V,2);$.__click=[ul,r,e];var ge=i($,!0);return s($),s(W),s(p),F(()=>{Te(B,`status ${t(D)??""}`),R(E,e.name),K.disabled=!t(v)&&!t(u),le(K,"btn-primary",t(v)||t(u)),R(oe,`Record ${(t(v)&&!t(g)?e.buggies.length+1:"F")??""}`),Te($,`btn ${(r()?"btn-success":"btn-secondary")??""} grow-1 text-xl`),le($,"hidden",e.idHidden),R(ge,r()?"ID'd":"ID?")}),Ot("press",K,()=>{_(g,!0)}),A(a,p),Ye({removeLastBuggy:S})}st(["click"]);var ml=G('<div class="text-light bg-base-300 flex flex-initial flex-row justify-around space-x-1 rounded-sm px-1 shadow-xl"><div class="my-auto text-xl"> </div> <div class="my-auto font-mono text-xl"> </div></div>'),pl=G('<fieldset class="fieldset bg-base-100 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg"> </legend> <div class="flex flex-row gap-2"></div></fieldset>');function xl(a,e){Ue(e,!0);let l=(g,y,w)=>{if(g.number=="1"||g.number=="F"){let S=new Date(g.time)-e.startTime,O=Math.ceil(S/1e3)%60;return`@${Math.max(Math.floor(S/1e3-O),0)/60}:${String(O).padStart(2,"0")}`}else{let S=w[w.indexOf(g)-1],O=new Date(g.time)-new Date(S.time),b=Math.floor(O/1e3)%60;return`+${Math.max(Math.floor(O/1e3-b),0)/60}:${String(b).padStart(2,"0")}`}};var r=pl(),n=i(r),v=i(n,!0);s(n);var u=c(n,2);ne(u,21,()=>e.buggies,ce,(g,y,w)=>{var S=ml(),O=i(S),b=i(O,!0);s(O);var D=c(O,2),p=i(D,!0);F(()=>R(p,l(t(y),w,e.buggies))),s(D),s(S),F(()=>R(b,t(y).number)),A(g,S)}),s(u),s(r),F(()=>R(v,e.name)),A(a,r),Ye()}function aa(a,e){e&&e!=="lg"&&e!=="sm"&&e!=="xs"?a.style.fontSize=e.replace("x","em"):a.style.fontSize=""}function hl(a,e,l,r,n,v=1,u="",g=""){let y=1,w=1;n&&(n=="horizontal"?y=-1:n=="vertical"?w=-1:y=w=-1),typeof a=="string"&&(a=parseFloat(a)),typeof e=="string"&&(e=parseFloat(e)),typeof l=="string"&&(l=parseFloat(l));const S=`${e*v}${u}`,O=`${l*v}${u}`;let b=`translate(${S},${O}) scale(${y*a},${w*a})`;return r&&(b+=` rotate(${r}${g})`),b}var wl=ht('<title class="svelte-bvo74f"> </title>'),yl=ht('<path class="svelte-bvo74f"></path>'),Sl=ht('<path class="svelte-bvo74f"></path><path class="svelte-bvo74f"></path>',1),Tl=ht('<svg aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg"><!><g class="svelte-bvo74f"><g class="svelte-bvo74f"><!></g></g></svg>');function re(a,e){Ue(e,!1);const l=Mt(),r=Mt();let n=Z(e,"class",24,()=>{}),v=Z(e,"id",24,()=>{}),u=Z(e,"style",24,()=>{}),g=Z(e,"icon",8),y=Z(e,"title",24,()=>{}),w=Z(e,"size",24,()=>{}),S=Z(e,"color",24,()=>{}),O=Z(e,"fw",8,!1),b=Z(e,"pull",24,()=>{}),D=Z(e,"scale",8,1),p=Z(e,"translateX",8,0),C=Z(e,"translateY",8,0),L=Z(e,"rotate",24,()=>{}),m=Z(e,"flip",24,()=>{}),H=Z(e,"spin",8,!1),B=Z(e,"pulse",8,!1),k=Z(e,"primaryColor",8,""),E=Z(e,"secondaryColor",8,""),ae=Z(e,"primaryOpacity",8,1),W=Z(e,"secondaryOpacity",8,.4),V=Z(e,"swapOpacity",8,!1),K=Mt();Dt(()=>(t(K),Ve(w()),aa),()=>{t(K)&&w()&&aa(t(K),w())}),Dt(()=>Ve(g()),()=>{_(l,g()&&g().icon||[0,0,"",[],""])}),Dt(()=>(Ve(D()),Ve(p()),Ve(C()),Ve(L()),Ve(m())),()=>{_(r,hl(D(),p(),C(),L(),m(),512))}),Va(),Qa();var oe=tt(),$=Se(oe);he($,()=>t(l)[4],ge=>{var x=Tl(),T=i(x);he(T,y,Q=>{var ee=wl(),de=i(ee,!0);s(ee),F(()=>R(de,y())),A(Q,ee)});var M=c(T),N=i(M),z=i(N);he(z,()=>typeof t(l)[4]=="string",Q=>{var ee=yl();F(()=>{te(ee,"d",t(l)[4]),te(ee,"fill",S()||k()||"currentColor"),te(ee,"transform",`translate(${t(l)[0]/-2} ${t(l)[1]/-2})`)}),A(Q,ee)},Q=>{var ee=Sl(),de=Se(ee),fe=c(de);F(()=>{te(de,"d",t(l)[4][0]),te(de,"fill",E()||S()||"currentColor"),te(de,"fill-opacity",V()!=!1?ae():W()),te(de,"transform",`translate(${t(l)[0]/-2} ${t(l)[1]/-2})`),te(fe,"d",t(l)[4][1]),te(fe,"fill",k()||S()||"currentColor"),te(fe,"fill-opacity",V()!=!1?W():ae()),te(fe,"transform",`translate(${t(l)[0]/-2} ${t(l)[1]/-2})`)}),A(Q,ee)}),s(N),s(M),s(x),vt(x,Q=>_(K,Q),()=>t(K)),F(()=>{te(x,"id",v()),al(x,`svelte-fa svelte-fa-base ${n()??""} svelte-bvo74f`),te(x,"style",u()),te(x,"viewBox",`0 0 ${t(l)[0]??""} ${t(l)[1]??""}`),le(x,"pulse",B()),le(x,"svelte-fa-size-lg",w()==="lg"),le(x,"svelte-fa-size-sm",w()==="sm"),le(x,"svelte-fa-size-xs",w()==="xs"),le(x,"svelte-fa-fw",O()),le(x,"svelte-fa-pull-left",b()==="left"),le(x,"svelte-fa-pull-right",b()==="right"),le(x,"spin",H()),te(M,"transform",`translate(${t(l)[0]/2} ${t(l)[1]/2})`),te(M,"transform-origin",`${t(l)[0]/4} 0`),te(N,"transform",t(r))}),A(ge,x)}),A(a,oe),Ye()}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const kl={prefix:"fas",iconName:"pencil",icon:[512,512,[9999,61504,"pencil-alt"],"f303","M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1 0 32c0 8.8 7.2 16 16 16l32 0zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"]},Dl={prefix:"fas",iconName:"sitemap",icon:[576,512,[],"f0e8","M208 80c0-26.5 21.5-48 48-48l64 0c26.5 0 48 21.5 48 48l0 64c0 26.5-21.5 48-48 48l-8 0 0 40 152 0c30.9 0 56 25.1 56 56l0 32 8 0c26.5 0 48 21.5 48 48l0 64c0 26.5-21.5 48-48 48l-64 0c-26.5 0-48-21.5-48-48l0-64c0-26.5 21.5-48 48-48l8 0 0-32c0-4.4-3.6-8-8-8l-152 0 0 40 8 0c26.5 0 48 21.5 48 48l0 64c0 26.5-21.5 48-48 48l-64 0c-26.5 0-48-21.5-48-48l0-64c0-26.5 21.5-48 48-48l8 0 0-40-152 0c-4.4 0-8 3.6-8 8l0 32 8 0c26.5 0 48 21.5 48 48l0 64c0 26.5-21.5 48-48 48l-64 0c-26.5 0-48-21.5-48-48l0-64c0-26.5 21.5-48 48-48l8 0 0-32c0-30.9 25.1-56 56-56l152 0 0-40-8 0c-26.5 0-48-21.5-48-48l0-64z"]},xt={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},Ml={prefix:"fas",iconName:"id-badge",icon:[384,512,[],"f2c1","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-384c0-35.3-28.7-64-64-64L64 0zm96 320l64 0c44.2 0 80 35.8 80 80c0 8.8-7.2 16-16 16L96 416c-8.8 0-16-7.2-16-16c0-44.2 35.8-80 80-80zm-32-96a64 64 0 1 1 128 0 64 64 0 1 1 -128 0zM144 64l96 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-96 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},Il={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},At={prefix:"fas",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},Ct={prefix:"fas",iconName:"id-card",icon:[576,512,[62147,"drivers-license"],"f2c2","M0 96l576 0c0-35.3-28.7-64-64-64L64 32C28.7 32 0 60.7 0 96zm0 32L0 416c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-288L0 128zM64 405.3c0-29.5 23.9-53.3 53.3-53.3l117.3 0c29.5 0 53.3 23.9 53.3 53.3c0 5.9-4.8 10.7-10.7 10.7L74.7 416c-5.9 0-10.7-4.8-10.7-10.7zM176 192a64 64 0 1 1 0 128 64 64 0 1 1 0-128zm176 16c0-8.8 7.2-16 16-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16zm0 64c0-8.8 7.2-16 16-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16zm0 64c0-8.8 7.2-16 16-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16z"]},El={prefix:"fas",iconName:"house",icon:[576,512,[127968,63498,63500,"home","home-alt","home-lg-alt"],"f015","M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c0 2.7-.2 5.4-.5 8.1l0 16.2c0 22.1-17.9 40-40 40l-16 0c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1L416 512l-24 0c-22.1 0-40-17.9-40-40l0-24 0-64c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 64 0 24c0 22.1-17.9 40-40 40l-24 0-31.9 0c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2l-16 0c-22.1 0-40-17.9-40-40l0-112c0-.9 0-1.9 .1-2.8l0-69.7-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"]},Ll=El,la={prefix:"fas",iconName:"arrow-down",icon:[384,512,[8595],"f063","M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},Ol={prefix:"fas",iconName:"inbox",icon:[512,512,[],"f01c","M121 32C91.6 32 66 52 58.9 80.5L1.9 308.4C.6 313.5 0 318.7 0 323.9L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-92.1c0-5.2-.6-10.4-1.9-15.5l-57-227.9C446 52 420.4 32 391 32L121 32zm0 64l270 0 48 192-51.2 0c-12.1 0-23.2 6.8-28.6 17.7l-14.3 28.6c-5.4 10.8-16.5 17.7-28.6 17.7l-120.4 0c-12.1 0-23.2-6.8-28.6-17.7l-14.3-28.6c-5.4-10.8-16.5-17.7-28.6-17.7L73 288 121 96z"]},ra={prefix:"fas",iconName:"arrow-up",icon:[384,512,[8593],"f062","M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2 160 448c0 17.7 14.3 32 32 32s32-14.3 32-32l0-306.7L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z"]},ba={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},Pl={prefix:"fas",iconName:"sign-hanging",icon:[512,512,["sign"],"f4d9","M96 0c17.7 0 32 14.3 32 32l0 32 352 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-352 0 0 352c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-352-32 0C14.3 128 0 113.7 0 96S14.3 64 32 64l32 0 0-32C64 14.3 78.3 0 96 0zm96 160l256 0c17.7 0 32 14.3 32 32l0 160c0 17.7-14.3 32-32 32l-256 0c-17.7 0-32-14.3-32-32l0-160c0-17.7 14.3-32 32-32z"]},Al=Pl,Cl={prefix:"fas",iconName:"circle-xmark",icon:[512,512,[61532,"times-circle","xmark-circle"],"f057","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]};var Rl=(a,e)=>e.removeEntry(e.idx),Nl=G('<label id="org-select" class="fieldset-label text-base"> </label> <input type="text" class="input">',1),zl=G('<fieldset class="fieldset bg-base-100 border-base-300 roundoed-box w-full border p-4"><legend class="fieldset-legend text-lg">Stop/Pause Notes</legend> <!></fieldset>'),Fl=G('<div class="card bg-base-300 my-2 flex flex-col p-4"><div class="flex w-full flex-row justify-between"><p class="badge badge-primary badge-xl"><!> </p> <p class="badge badge-secondary badge-xl"><!> </p> <p class="badge badge-info badge-xl"><!> </p> <button class="btn btn-warning btn-sm"><!></button></div> <!> <!></div>');function Hl(a,e){Ue(e,!0);let l=U(e.round);var r=Fl(),n=i(r),v=i(n),u=i(v);re(u,{icon:Dl});var g=c(u,1,!0);s(v);var y=c(v,2),w=i(y);re(w,{icon:At});const S=ue(()=>new Date(l.startTime).getHours().toString().padStart(2,"0")??""),O=ue(()=>new Date(l.startTime).getMinutes().toString().padStart(2,"0")??"");var b=c(w);F(()=>R(b,`${t(S)}:${t(O)}`)),s(y);var D=c(y,2),p=i(D);re(p,{icon:Ml});var C=c(p,1,!0);s(D);var L=c(D,2);L.__click=[Rl,e];var m=i(L);re(m,{icon:ba,scale:"1.5x"}),s(L),s(n);var H=c(n,2);ne(H,17,()=>l.buggies,ce,(k,E)=>{var ae=ue(()=>new Date(l.startTime));xl(k,{get name(){return t(E).name},get buggies(){return t(E).buggies},get startTime(){return t(ae)}})});var B=c(H,2);he(B,()=>l.notes.length>0,k=>{var E=zl(),ae=c(i(E),2);ne(ae,17,()=>l.notes,ce,(W,V)=>{var K=Nl(),oe=Se(K),$=i(oe);F(()=>R($,`${(t(V).stopOrPause?"Stop":"Pause")??""} at ${new Date(t(V).time).toLocaleTimeString()??""}`)),s(oe);var ge=c(oe,2);Ce(ge),et(ge,()=>t(V).info,x=>t(V).info=x),A(W,K)}),s(E),A(k,E)}),s(r),F(()=>{R(g,l.team),R(C,l.didID?"Y":"N")}),A(a,r),Ye()}st(["click"]);var Bl=G('<div class="row-span-3 flex flex-col overflow-scroll"></div>');function jl(a,e){Ue(e,!0);let l=ut("buggy",[]);ut("config",[]);let r=u=>{let g=$e(l.value);g.splice(g.length-1-u,1),l.value=g},n=(u,g)=>{l.value[u]=g};var v=Bl();ne(v,21,()=>l.value.toReversed(),ce,(u,g,y)=>{var w=ue(()=>l.value.length-y);Hl(u,{get round(){return l.value[y]},get idx(){return t(w)},removeEntry:r,updateEntry:n})}),s(v),A(a,v),Ye()}var Ul=(a,e)=>e(),Yl=(a,e,l,r)=>e(t(l),r),ql=G("<option> </option>"),Xl=G('<div class="card bg-neutral card-md w-full"><div class="card-body flex w-full flex-row items-baseline justify-between py-2"><span class="text-xl"> </span> <div class="flex w-1/3 flex-row justify-between"><button class="btn btn-sm btn-info min-w-[1rem]"><!></button> <button class="btn btn-sm btn-info color-white"><!></button></div></div></div>'),Jl=(a,e,l,r)=>e(t(l),r),Gl=G("<option> </option>"),Vl=G('<div class="card bg-neutral card-md w-full"><div class="card-body flex w-full flex-row items-baseline justify-between py-2"><span class="text-xl"> </span> <div class="flex w-1/3 flex-row justify-between"><button class="btn btn-sm btn-info min-w-[1rem]"><!></button> <button class="btn btn-sm btn-info color-white"><!></button></div></div></div>'),Kl=G("<option> </option>"),Ql=(a,e,l,r,n,v)=>{t(e).length>0&&t(l).length>0&&t(r).length>0&&(n.push({name:t(e),callsign:t(l),lastId:new Date().toUTCString(),station:t(r),isPrimary:t(v)}),_(e,""),_(l,""),_(r,""),_(v,!1))},Wl=G('<div class="card bg-neutral card-md w-full"><div class="card-body flex w-full flex-row items-baseline justify-between py-2"><div class="flex h-full w-2/3 flex-col"><div class="flex flex-row items-center justify-start gap-2"><!> <span class="overflow-x-scroll text-lg"> </span></div> <div class="flex flex-row items-center justify-start gap-2"><!> <span class="overflow-x-scroll text-lg"> </span></div> <div class="flex flex-row items-center justify-start gap-2"><!> <span class="overflow-x-scroll text-lg"> </span></div></div> <div class="flex h-full w-1/3 flex-col justify-between gap-1"><button class="btn btn-xs btn-error min-w-[1rem] grow-1"><!></button> <button class="btn btn-sm btn-info grow-2"><!></button></div></div></div>'),Zl=G("<option> </option>"),$l=(a,e,l,r,n,v,u,g)=>{e[t(l)]={name:t(r),callsign:t(n),station:t(v),lastId:t(u).lastId,isPrimary:t(g)},_(r,""),_(n,""),_(v,""),_(g,!1)},er=G("<option> </option>"),tr=(a,e)=>e(),ar=G('<div class="row-span-3 flex flex-col overflow-scroll"><div class="mx-auto w-7/8"><button class="btn btn-primary btn-block mt-4 w-full text-xl">Save</button> <div role="alert" class="alert alert-error mt-2 mb-1 py-1"><!> <span class="text-lg"> </span></div> <fieldset class="fieldset bg-base-200 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg">Teams</legend> <label id="org-select" class="fieldset-label text-base">Select Orgs</label> <select id="org-select" class="select select-lg" multiple></select> <label id="org-select" class="fieldset-label text-base">Set Roll Order</label> <div class="flex flex-col gap-2"></div></fieldset> <fieldset class="fieldset bg-base-200 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg">Stations</legend> <label id="org-select" class="fieldset-label text-base">Select Stations</label> <select id="org-select" class="select select-lg" multiple></select> <label id="org-select" class="fieldset-label text-base">Set Station Order</label> <div class="flex flex-col gap-2"></div></fieldset> <fieldset class="fieldset bg-base-200 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg">Operators</legend> <fieldset class="fieldset bg-base-100 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg">Add Operator</legend> <label id="org-select" class="fieldset-label text-base">Operator Name</label> <input type="text" class="input"> <label id="org-select" class="fieldset-label text-base">Operator Callsign</label> <input type="text" class="input"> <label id="org-select" class="fieldset-label text-base">Select Station</label> <select class="select"><!><option>Rover</option></select> <label class="fieldset-label text-base">Should be primary? <input type="checkbox" class="toggle toggle-xl bg-transparent! bg-none"></label> <button class="btn btn-secondary btn-block">Save Operator</button></fieldset> <label id="org-select" class="fieldset-label text-base">Assign Operators</label> <div class="flex flex-col gap-2"></div> <dialog class="modal"><div class="modal-box"><fieldset class="fieldset bg-base-100 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg">Edit Operator</legend> <label id="org-select" class="fieldset-label text-base">Operator Name</label> <input type="text" class="input"> <label id="org-select" class="fieldset-label text-base">Operator Callsign</label> <input type="text" class="input"> <label id="org-select" class="fieldset-label text-base">Select Station</label> <select class="select"><!><option>Rover</option></select> <label class="fieldset-label text-base">Should be primary? <input type="checkbox" class="toggle toggle-xl bg-transparent! bg-none"></label> <form method="dialog"><button class="btn btn-secondary btn-block">Save Operator</button></form></fieldset></div></dialog></fieldset> <fieldset class="fieldset bg-base-200 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg">Misc</legend> <label class="fieldset-label text-lg">Flip Handedness <input type="checkbox" class="toggle toggle-xl bg-transparent! bg-none"></label> <label class="fieldset-label text-base">Select Theme</label> <select class="select select-lg"><option selected>default</option><!></select> <label class="fieldset-label text-base">Export Password</label> <input type="text" class="input"></fieldset> <button class="btn btn-error btn-block mt-7 w-full text-xl">Clear ALL Data</button></div></div>');function lr(a,e){Ue(e,!0);let l=Z(e,"config",7),r=Z(e,"selectedTheme",15),n=ut("buggy",[]),v=j(U(l().value.teams)),u=U(l().value.teams),g=j(U(l().value.stations)),y=U(l().value.stations),w=j(!1),S=U(l().value.operators),O=j(U(l().value.exportPassword)),b=j(""),D=j(""),p=j(""),C=j(!1),L=j(void 0),m=j(void 0),H=j(void 0),B=j(""),k=["AEPi","Apex","Atlas","CIA","DG","Fringe","PiKA","Robobuggy","SAE","SDC","SigEp","SigNu","Spirit"],E=["Net","Panther","Chute","Start","Finish","Broadcast","TV","Westinghouse","Monument","Scaife","Chair Shadow","Safety Shadow"],ae=["light","dark","cupcake","bumblebee","emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autum","business","acid","lemonade","night","coffee","winter","dim","nord","sunset","caramellatte","abyss","silk"];function W(o,d,f){for(;d<0;)d+=o.length;for(;f<0;)f+=o.length;if(f>=o.length)for(var h=f-o.length+1;(h-=1)+1;)o.push(void 0);return o.splice(f,0,o.splice(d,1)[0]),o}function V(o,d){W(o,d,Math.max(d-1,0))}function K(o,d){W(o,d,Math.min(d+1,o.length-1))}function oe(o,d){d.forEach(f=>{o.includes(f)||d.splice(d.indexOf(f),1)}),o.forEach(f=>{d.includes(f)||d.push(f)})}let $=()=>{l().value={stations:[],teams:[],operators:[],theme:"dark",handedness:"right",nextIDRoundTime:new Date().toUTCString(),startTime:new Date().toUTCString()},n.value=[]};async function ge(){let o=!0;if(y.forEach(d=>{let f=!1;S.forEach(h=>{h.station==d&&h.isPrimary&&(f=!0)}),o=o&&f}),o){l().value.teams=u,l().value.stations=y,l().value.operators=S,l().value.theme=r(),l().value.handedness=t(w),l().value.exportPassword=t(O),_(B,"");let d=new Date,f={sheetId:"Rolls "+(d.getMonth()+1).toString()+"_"+d.getDate().toString()};try{const h=await fetch("https://buggyapp.kandasamyc.com/createSheet",{method:"POST",headers:{"Auth-Code":l().value.exportPassword},body:JSON.stringify(f)})}catch{console.log("Post error")}}else _(B,"All stations need primary operator")}var x=ar(),T=i(x),M=i(T);M.__click=[Ul,ge];var N=c(M,2),z=i(N);re(z,{icon:Cl});var Q=c(z,2),ee=i(Q,!0);s(Q),s(N);var de=c(N,2),fe=c(i(de),4);fe.__change=[Yl,oe,v,u],ne(fe,21,()=>k,ce,(o,d)=>{var f=ql(),h={},I=i(f,!0);s(f),F(()=>{te(f,"id",t(d)),h!==(h=t(d))&&(f.value=(f.__value=t(d))==null?"":t(d)),R(I,t(d))}),A(o,f)}),s(fe);var Ee=c(fe,4);ne(Ee,21,()=>u,ce,(o,d,f)=>{var h=Xl(),I=i(h),q=i(I),X=i(q,!0);s(q);var J=c(q,2),ie=i(J);ie.__click=()=>V(u,f);var pe=i(ie);re(pe,{icon:ra,scale:1.2,class:"bg-light"}),s(ie);var se=c(ie,2);se.__click=()=>K(u,f);var Y=i(se);re(Y,{icon:la,scale:1.2,class:"bg-light"}),s(se),s(J),s(I),s(h),F(()=>R(X,t(d))),A(o,h)}),s(Ee),s(de);var Le=c(de,2),be=c(i(Le),4);be.__change=[Jl,oe,g,y],ne(be,21,()=>E,ce,(o,d)=>{var f=Gl(),h={},I=i(f,!0);s(f),F(()=>{te(f,"id",t(d)),h!==(h=t(d))&&(f.value=(f.__value=t(d))==null?"":t(d)),R(I,t(d))}),A(o,f)}),s(be);var ke=c(be,4);ne(ke,21,()=>y,ce,(o,d,f)=>{var h=Vl(),I=i(h),q=i(I),X=i(q,!0);s(q);var J=c(q,2),ie=i(J);ie.__click=()=>V(y,f);var pe=i(ie);re(pe,{icon:ra,scale:1.2,class:"bg-light"}),s(ie);var se=c(ie,2);se.__click=()=>K(y,f);var Y=i(se);re(Y,{icon:la,scale:1.2,class:"bg-light"}),s(se),s(J),s(I),s(h),F(()=>R(X,t(d))),A(o,h)}),s(ke),s(Le);var ve=c(Le,2),we=c(i(ve),2),me=c(i(we),4);Ce(me);var De=c(me,4);Ce(De);var Re=c(De,4),Oe=i(Re);ne(Oe,17,()=>y,ce,(o,d)=>{var f=Kl(),h={},I=i(f,!0);s(f),F(()=>{te(f,"id",t(d)),h!==(h=t(d))&&(f.value=(f.__value=t(d))==null?"":t(d)),R(I,t(d))}),A(o,f)}),We(),s(Re);var _e=c(Re,2),Me=c(i(_e));Ce(Me),s(_e);var Ie=c(_e,2);Ie.__click=[Ql,b,D,p,S,C],s(we);var Ne=c(we,4);ne(Ne,21,()=>S,ce,(o,d,f)=>{var h=Wl(),I=i(h),q=i(I),X=i(q),J=i(X),ie=ue(()=>`w-1/8  ${(t(d).isPrimary?"text-info":"")??""}`);re(J,{icon:xt,get class(){return t(ie)}});var pe=c(J,2),se=i(pe,!0);s(pe),s(X);var Y=c(X,2),ye=i(Y);re(ye,{icon:Ct,class:"w-1/8"});var je=c(ye,2),wt=i(je,!0);s(je),s(Y);var Bt=c(Y,2),jt=i(Bt);re(jt,{icon:Al,class:"w-1/8"});var Ut=c(jt,2),ma=i(Ut,!0);s(Ut),s(Bt),s(q);var Yt=c(q,2),_t=i(Yt);_t.__click=()=>S.splice(f,1);var pa=i(_t);re(pa,{icon:ba,scale:1.2}),s(_t);var yt=c(_t,2);yt.__click=()=>{_(m,U(t(d))),_(b,U(t(m).name)),_(D,U(t(m).callsign)),_(p,U(t(m).station)),_(C,U(t(m).isPrimary)),_(H,U(f)),t(L).showModal()};var xa=i(yt);re(xa,{icon:kl,scale:1.2}),s(yt),s(Yt),s(I),s(h),F(()=>{R(se,t(d).name),R(wt,t(d).callsign),R(ma,t(d).station)}),A(o,h)}),s(Ne);var ze=c(Ne,2),Ze=i(ze),qe=i(Ze),Fe=c(i(qe),4);Ce(Fe);var Be=c(Fe,4);Ce(Be);var He=c(Be,4),at=i(He);ne(at,17,()=>y,ce,(o,d)=>{var f=Zl(),h={},I=i(f,!0);s(f),F(()=>{te(f,"id",t(d)),h!==(h=t(d))&&(f.value=(f.__value=t(d))==null?"":t(d)),R(I,t(d))}),A(o,f)}),We(),s(He);var Xe=c(He,2),Je=c(i(Xe));Ce(Je),s(Xe);var Pe=c(Xe,2),it=i(Pe);it.__click=[$l,S,H,b,D,p,m,C],s(Pe),s(qe),s(Ze),s(ze),vt(ze,o=>_(L,o),()=>t(L)),s(ve);var Ae=c(ve,2),nt=c(i(Ae),2),Ge=c(i(nt));Ce(Ge),s(nt);var lt=c(nt,4),rt=c(i(lt));ne(rt,17,()=>ae,ce,(o,d)=>{var f=er(),h={},I=i(f,!0);s(f),F(()=>{te(f,"id",t(d)),h!==(h=t(d))&&(f.value=(f.__value=t(d))==null?"":t(d)),R(I,t(d))}),A(o,f)}),s(lt);var gt=c(lt,4);Ce(gt),s(Ae);var P=c(Ae,2);P.__click=[tr,$],s(T),s(x),F(()=>{le(N,"hidden",t(B).length==0),R(ee,t(B)),Me.disabled=t(p)=="Rover"}),Qe(fe,()=>t(v),o=>_(v,o)),Qe(be,()=>t(g),o=>_(g,o)),et(me,()=>t(b),o=>_(b,o)),et(De,()=>t(D),o=>_(D,o)),Qe(Re,()=>t(p),o=>_(p,o)),Et(Me,()=>t(C),o=>_(C,o)),et(Fe,()=>t(b),o=>_(b,o)),et(Be,()=>t(D),o=>_(D,o)),Qe(He,()=>t(p),o=>_(p,o)),Et(Je,()=>t(C),o=>_(C,o)),Et(Ge,()=>t(w),o=>_(w,o)),Qe(lt,r),et(gt,()=>t(O),o=>_(O,o)),A(a,x),Ye()}st(["click","change"]);var rr=G("<div></div>"),sr=(a,e)=>e.idFunc(e.idx),ir=G('<div class="flex h-full w-1/2 flex-col justify-between gap-1"><div class="flex min-w-[1rem] grow-1 flex-row items-center gap-2"><div class="inline-grid *:[grid-area:1/1]"><!> <div></div></div> <span class=" text-base"> </span></div> <button>ID</button></div>');function sa(a,e){Ue(e,!0);let l=j(U(new Date)),r=ue(()=>Math.max(Math.floor((t(l)-new Date(e.lastId))/6e4),0)),n=8,v=12;setTimeout(()=>_(l,U(new Date)),6e4);var u=ir(),g=i(u),y=i(g),w=i(y);he(w,()=>t(r)>=n,p=>{var C=rr();F(()=>Te(C,`status ${(t(r)>=v?"status-error":t(r)>=n?"status-warning":"status-success")??""} animate-ping`)),A(p,C)});var S=c(w,2);s(y);var O=c(y,2),b=i(O);s(O),s(g);var D=c(g,2);D.__click=[sr,e],s(u),F(()=>{Te(S,`status ${(t(r)>=v?"status-error":t(r)>=n?"status-warning":"status-success")??""}`),R(b,`ID'd ${t(r)??""}m ago`),Te(D,`btn btn-block btn-lg mb-1 grow-1 ${(t(r)>=n?"btn-primary":"btn-secondary")??""}`)}),A(a,u),Ye()}st(["click"]);var nr=G("<option> </option>"),or=G("<option> </option>"),cr=(a,e)=>t(e).showModal(),dr=G("<div></div>"),vr=G('<div class="card bg-neutral card-md w-full"><div class="card-body flex w-full flex-row items-baseline justify-between py-2"><div class="flex h-full w-1/2 flex-col"><div class="flex flex-row items-center justify-start gap-2"><!> <span class="overflow-x-scroll text-lg"> </span></div> <div class="flex flex-row items-center justify-start gap-2"><!> <span class="overflow-x-scroll text-lg"> </span></div> <div class="flex flex-row items-center justify-start gap-2"><!> <span class="overflow-x-scroll text-lg"> </span></div></div> <!></div></div>'),ur=G('<fieldset class="fieldset bg-base-200 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg"><div class="flex min-w-[1rem] grow-1 flex-row items-center gap-2"><div class="inline-grid *:[grid-area:1/1]"><!> <div></div></div> <span class=" text-base"> </span></div></legend> <label class="fieldset-label text-base">Individual Statuses</label> <div class="flex flex-col gap-2"></div></fieldset>'),fr=G('<div class="card bg-neutral card-md w-full"><div class="card-body flex w-full flex-row items-baseline justify-between py-2"><div class="flex h-full w-1/2 flex-col"><div class="flex flex-row items-center justify-start gap-2"><!> <span class="overflow-x-scroll text-lg"> </span></div> <div class="flex flex-row items-center justify-start gap-2"><!> <span class="overflow-x-scroll text-lg"> </span></div> <div class="flex flex-row items-center justify-start gap-2"><!> <span class="overflow-x-scroll text-lg"> </span></div></div> <!></div></div>'),gr=G('<div class="row-span-3 flex flex-col overflow-scroll"><dialog class="modal"><div class="modal-box"><fieldset class="fieldset bg-base-100 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg">Quick Swap</legend> <label class="fieldset-label text-base">First Operator</label> <select class="select select-lg"></select> <label class="fieldset-label text-base">Second Operator</label> <select class="select select-lg"></select> <form method="dialog"><button class="btn btn-primary btn-block my-2">Swap</button> <button class="btn btn-error btn-block">Cancel</button></form></fieldset></div></dialog> <div class="mx-auto w-7/8"><button class="btn btn-block btn-secondary">Quick Swap</button> <!> <fieldset class="fieldset bg-base-200 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg"><div class="flex min-w-[1rem] grow-1 flex-row items-center gap-2"><div class="inline-grid *:[grid-area:1/1]"><div></div> <div></div></div> <span class=" text-base">Rover Operators</span></div></legend> <label class="fieldset-label text-base">Individual Statuses</label> <div class="flex flex-col gap-2"></div></fieldset></div></div>');function _r(a,e){Ue(e,!0);let l=Z(e,"config",7),r=j(""),n=j(""),v=x=>{l().value.operators[x].lastId=new Date().toUTCString()},u=x=>{let T=!1,M=!1,N=new Date;return l().value.operators.forEach(z=>{if(z.station==x){let Q=Math.max(Math.floor((N-new Date(z.lastId))/6e4),0);z.isPrimary&&Q>=12?T=!0:Q>=12&&(M=!0)}}),T?"status-error":M?"status-warning":"status-success"},g=ue(()=>l().value.stations.map(u)),y=ue(()=>u("Rover")),w=j(void 0),S=()=>{if(t(r)==t(n))return;let x=l().value.operators.find(z=>z.callsign==t(r)),T=l().value.operators.find(z=>z.callsign==t(n)),M=x.station,N=x.isPrimary;x.station=T.station,x.isPrimary=T.isPrimary,T.station=M,T.isPrimary=N,l().value.operators=l().value.operators.map(z=>z.callsign==x.callsign?x:(z.callsign=T.callsign)?T:z)};var O=gr(),b=i(O),D=i(b),p=i(D),C=c(i(p),4);ne(C,21,()=>l().value.operators,ce,(x,T)=>{var M=nr(),N={},z=i(M);s(M),F(()=>{N!==(N=t(T).callsign)&&(M.value=(M.__value=t(T).callsign)==null?"":t(T).callsign),R(z,`${t(T).name??""} (${(t(T).isPrimary?"Primary at ":"")??""}${t(T).station??""})`)}),A(x,M)}),s(C);var L=c(C,4);ne(L,21,()=>l().value.operators,ce,(x,T)=>{var M=or(),N={},z=i(M);s(M),F(()=>{N!==(N=t(T).callsign)&&(M.value=(M.__value=t(T).callsign)==null?"":t(T).callsign),R(z,`${t(T).name??""} (${(t(T).isPrimary?"Primary at":"")??""} ${t(T).station??""})`)}),A(x,M)}),s(L);var m=c(L,2),H=i(m);H.__click=S,We(2),s(m),s(p),s(D),s(b),vt(b,x=>_(w,x),()=>t(w));var B=c(b,2),k=i(B);k.__click=[cr,w];var E=c(k,2);ne(E,17,()=>l().value.stations,ce,(x,T,M)=>{var N=ur(),z=i(N),Q=i(z),ee=i(Q),de=i(ee);he(de,()=>t(g)[M]=="status-error",ke=>{var ve=dr();F(()=>Te(ve,`status ${t(g)[M]??""} animate-ping`)),A(ke,ve)});var fe=c(de,2);s(ee);var Ee=c(ee,2),Le=i(Ee);s(Ee),s(Q),s(z);var be=c(z,4);ne(be,21,()=>l().value.operators,ce,(ke,ve,we)=>{var me=tt(),De=Se(me);he(De,()=>t(ve).station==t(T),Re=>{var Oe=vr(),_e=i(Oe),Me=i(_e),Ie=i(Me),Ne=i(Ie),ze=ue(()=>`w-1/8 ${(t(ve).isPrimary?"text-info":"")??""}`);re(Ne,{icon:xt,get class(){return t(ze)}});var Ze=c(Ne,2),qe=i(Ze,!0);s(Ze),s(Ie);var Fe=c(Ie,2),Be=i(Fe);re(Be,{icon:Ct,class:"w-1/8"});var He=c(Be,2),at=i(He,!0);s(He),s(Fe);var Xe=c(Fe,2),Je=i(Xe);re(Je,{icon:At,class:"w-1/8"});var Pe=c(Je,2),it=i(Pe,!0);F(()=>R(it,new Date(t(ve).lastId).toLocaleTimeString())),s(Pe),s(Xe),s(Me);var Ae=c(Me,2);sa(Ae,{get lastId(){return t(ve).lastId},idx:we,idFunc:v}),s(_e),s(Oe),F(()=>{R(qe,t(ve).name),R(at,t(ve).callsign)}),A(Re,Oe)}),A(ke,me)}),s(be),s(N),F(()=>{Te(fe,`status ${t(g)[M]??""}`),R(Le,`${t(T)??""} Operators`)}),A(x,N)});var ae=c(E,2),W=i(ae),V=i(W),K=i(V),oe=i(K),$=c(oe,2);s(K),We(2),s(V),s(W);var ge=c(W,4);ne(ge,21,()=>l().value.operators,ce,(x,T,M)=>{var N=tt(),z=Se(N);he(z,()=>t(T).station=="Rover",Q=>{var ee=fr(),de=i(ee),fe=i(de),Ee=i(fe),Le=i(Ee),be=ue(()=>`w-1/8 ${(t(T).isPrimary?"text-info":"")??""}`);re(Le,{icon:xt,get class(){return t(be)}});var ke=c(Le,2),ve=i(ke,!0);s(ke),s(Ee);var we=c(Ee,2),me=i(we);re(me,{icon:Ct,class:"w-1/8"});var De=c(me,2),Re=i(De,!0);s(De),s(we);var Oe=c(we,2),_e=i(Oe);re(_e,{icon:At,class:"w-1/8"});var Me=c(_e,2),Ie=i(Me,!0);F(()=>R(Ie,new Date(t(T).lastId).toLocaleTimeString())),s(Me),s(Oe),s(fe);var Ne=c(fe,2);sa(Ne,{get lastId(){return t(T).lastId},idx:M,idFunc:v}),s(de),s(ee),F(()=>{R(ve,t(T).name),R(Re,t(T).callsign)}),A(Q,ee)}),A(x,N)}),s(ge),s(ae),s(B),s(O),F(()=>{Te(oe,`status ${t(y)??""} animate-ping`),Te($,`status ${t(y)??""}`)}),Qe(C,()=>t(r),x=>_(r,x)),Qe(L,()=>t(n),x=>_(n,x)),A(a,O),Ye()}st(["click"]);var br=G('<option class="p-1 text-sm"> </option>'),mr=G('<button class="btn btn-error h-full text-xl">Are you sure?</button>'),pr=(a,e)=>{_(e,!0),setTimeout(()=>_(e,!1),2e3)},xr=G('<button class="btn btn-warning h-full text-xl">Clear Data</button>'),hr=G("<button>Copy Data To Clipboard</button> <button>Export Data</button> <!>",1),wr=G('<button class="btn btn-warning h-full text-xl"> </button> <button class="btn h-full text-xl"> </button> <button class="btn btn-secondary h-full text-xl"> </button>',1),yr=G('<label id="org-select" class="fieldset-label text-base"> </label> <input type="text" class="input">',1),Sr=(a,e)=>{_(e,!1)},Tr=(a,e)=>_(e,0),kr=(a,e)=>_(e,1),Dr=(a,e)=>_(e,2),Mr=(a,e)=>_(e,3),Ir=G('<input type="radio" name="theme-dropdown" class="theme-controller btn btn-sm btn-block btn-ghost hidden w-full justify-start" checked> <div class="h-svh w-full px-2 py-2"><div class="grid h-full grid-flow-col grid-rows-12 gap-0 text-2xl"><div id="header-row" class="row-span-1 grid grid-flow-col grid-cols-3 grid-rows-4 gap-x-3"><select class="bg-base-300 form-select col-span-1 row-span-4 h-full w-full rounded-md border-0 text-lg"></select> <p class="col-span-1 col-start-2 row-span-2 row-start-2 text-center text-xl"> </p> <div class="col-span-1 col-start-3 row-span-4 mr-2"><button class="btn h-full w-full touch-manipulation text-lg"> </button></div></div> <div id="content-row"><!></div> <div id="settings-row"><!></div> <dialog class="modal"><div class="modal-box"><fieldset class="fieldset bg-base-100 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg">Stop/Pause Notes</legend> <!> <form method="dialog"><button class="btn btn-secondary btn-block">Close</button></form></fieldset></div></dialog></div> <div class="dock bg-base-300 max-h-1/11 pt-0.5"><button class="my-auto inline-flex items-center rounded-md text-xl"><!> <span class="dock-label text-sm!">Settings</span></button> <button class="my-auto inline-flex items-center rounded-md text-xl"><!> <span class="dock-label text-sm!">Home</span></button> <button class="my-auto inline-flex items-center rounded-md text-xl"><!> <span class="dock-label text-sm!">Data</span></button> <button class="my-auto inline-flex items-center rounded-md text-xl"><!> <span class="dock-label text-sm!">Operators</span></button></div></div>',1);function Rr(a,e){Ue(e,!0);let l=ut("buggy",[]),r=ut("config",{stations:[],teams:[],operators:[],theme:"dark",handedness:"right",nextIDRoundTime:new Date().toUTCString(),startTime:new Date().toUTCString()}),n=j(U(r.value.theme)),v=j(1),u=j(void 0),g=j(0),y=j(U([])),w=ue(()=>new Date(r.value.startTime)),S=0,O=j(0),b=j(!0),D=!1,p=j(!1),C=j(!1),L=j(!1),m=j(!1),H=j(!1),B=j(U(r.value.stations.map(P=>({name:P,buggies:[],followCarSeen:!1})))),k=j(U([])),E=j(U(r.value.stations.map(()=>!1))),ae=ue(()=>r.value.teams),W=j(!1),V=j(!1),K=U([]),oe=ue(()=>r.value.exportPassword!=""),$=j(U(r.value.teams.length>0?r.value.teams[0]:"N/A")),ge=P=>o=>{r.value.operators=r.value.operators.map(d=>(d.station==P&&d.isPrimary&&(d.lastId=o),d))},x=()=>{S=setInterval(()=>{_(O,new Date-t(w))},1e3)},T=()=>{let P=new Date;r.value.nextIDRoundTime=new Date(P.getTime()+10*6e4).toUTCString(),_(b,!t(b))},M=P=>{clearInterval(S);let o={buggies:$e(t(B)),team:$e(t($)),startTime:$e(t(w)),notes:$e(t(k)),didId:!1};if(o.operators=r.value.stations.map(d=>r.value.operators.find(f=>f.station==d&&f.isPrimary).callsign),t(E).forEach(d=>{d&&(o.didId=!0)}),P){_($,U(t(ae)[(t(ae).indexOf(t($))+1)%t(ae).length]));let d=$e(l.value);d.push(o),l.value=d}_(B,U(r.value.stations.map(d=>({name:d,buggies:[],followCarSeen:!1})))),_(E,U(r.value.stations.map(()=>!1))),_(k,U([]))};async function N(){try{await navigator.clipboard.writeText(JSON.stringify($e(l.value),null,4)),_(C,!0),_(L,!1)}catch(P){console.error(P.message),_(C,!0),_(L,!0),setInterval(()=>{_(C,!1),_(L,!1)},1500)}}function z(P,o={timeframe:300}){const d="tapOrPress";let h=!1,I,q,X,J=!1;function ie(ye){P.dispatchEvent(new CustomEvent(d,{detail:{newState:ye}}))}function pe(ye,je){clearTimeout(X),h&&o.handler(J),h=!1,J=!1}function se(ye,je){return h&&I*I+q*q>=20&&(h=!1),!1}function Y(ye,je){h||(h=!0,I=je.clientX,q=je.clientY),X=setTimeout(()=>{J=!0,ie(!0)},o.timeframe)}return _a(d,P,se,Y,pe)}let Q=P=>{P?M(!1):t(y).length>0?K[t(y).pop()].removeLastBuggy():console.log("empty"),_(V,!1)},ee=P=>{let o={stopOrPause:!t(W),time:new Date().toUTCString(),info:""};t(k).push(o),t(u).showModal()},de=(P,o,d)=>{if(o.number=="1"||o.number=="F"){let f=new Date(o.time)-P,h=Math.ceil(f/1e3)%60;return`@${Math.floor(Math.max(f/1e3-h,0))/60}:${String(h).padStart(2,"0")}`}else{let f=d[d.indexOf(o)-1],h=new Date(o.time)-new Date(f.time),I=h/1e3%60;return`+${Math.max(Math.floor(h/1e3-I),0)/60}:${String(Math.floor(I)).padStart(2,"0")}`}},fe=async()=>{let o=[["Position","Call","Name"]].concat(r.value.operators.map(X=>[X.station+(X.isPrimary?" (Primary)":""),X.callsign,X.name])),d=[["Buggy"].concat(r.value.stations)],f=r.value.stations.map(()=>""),h=l.value.reduce((X,J)=>{let ie=[[new Date(J.startTime).toLocaleTimeString(),"@",J.team]],pe=["Operators"].concat(J.operators),se=J.buggies[0].buggies.map(Y=>[Y.number].concat(f));return J.buggies.forEach((Y,ye)=>{new Date(Y.buggies[0].time),Y.buggies.forEach((je,wt)=>{se[wt][ye+1]=de(new Date(J.startTime),je,Y.buggies)})}),J.notes.forEach((Y,ye)=>{ye==0&&se[0].push("Notes"),se[0].push((Y.stopOrPause?"Stop":"Pause")+" at "+new Date(Y.time).toLocaleString()),se[1].push(Y.info)}),X.concat(ie.concat(pe).concat(d).concat(se))},[]),I=new Date,q={data:o.concat([[]].concat(h)),sheetId:"Rolls "+(I.getMonth()+1).toString()+"_"+I.getDate().toString()};try{(await fetch("https://buggyapp.kandasamyc.com/updateData",{method:"POST",headers:{"Auth-Code":r.value.exportPassword},body:JSON.stringify(q)})).ok?(_(m,!0),_(H,!1)):(_(m,!0),_(H,!0))}catch{_(m,!0),_(H,!0)}setTimeout(()=>{_(m,!1)},3e3)},Ee=P=>{let o=Math.ceil(P/1e3)%60;return`${Math.max(0,Math.floor(P/1e3-o))/60}:${String(o).padStart(2,"0")}`};var Le=Ir(),be=Se(Le);Ce(be);var ke=c(be,2),ve=i(ke),we=i(ve),me=i(we);ne(me,21,()=>t(ae),ce,(P,o)=>{var d=br(),f={},h=i(d,!0);s(d),F(()=>{f!==(f=t(o))&&(d.value=(d.__value=t(o))==null?"":t(o)),R(h,t(o))}),A(P,d)}),s(me);var De=c(me,2),Re=i(De);F(()=>R(Re,`Round Timer: ${Ee(t(O))??""}`)),s(De);var Oe=c(De,2),_e=i(Oe),Me=i(_e,!0);s(_e),Pt(_e,(P,o)=>z(P,o),()=>({handler:Q,timeframe:300})),s(Oe),s(we);var Ie=c(we,2),Ne=i(Ie);he(Ne,()=>t(v)==2,P=>{jl(P,{get exportError(){return t(H)},set exportError(o){_(H,U(o))},get exportSubmitted(){return t(m)},set exportSubmitted(o){_(m,U(o))}})},P=>{var o=tt(),d=Se(o);he(d,()=>t(v)==1,f=>{var h=tt(),I=Se(h);ne(I,17,()=>t(B),ce,(q,X,J)=>{var ie=ue(()=>t(g)!=0?J==0?6:t(B)[J-1].buggies.length:0),pe=ue(()=>t(g)!=0?J>0?t(B)[J-1].followCarSeen:!0:!1),se=ue(()=>ge(r.value.stations[J]));vt(bl(q,{get name(){return r.value.stations[J]},get buggies(){return t(X).buggies},set buggies(Y){t(X).buggies=Y},get idHidden(){return t(b)},get maxBuggies(){return t(ie)},get startTime(){return t(w)},get followRecorded(){return t(X).followCarSeen},set followRecorded(Y){t(X).followCarSeen=Y},get prevFollowRecorded(){return t(pe)},get didID(){return t(E)[J]},set didID(Y){t(E)[J]=Y},get operatorLastIdUpdateFunc(){return t(se)},get undoList(){return t(y)},set undoList(Y){_(y,U(Y))},idx:J,get config(){return r},set config(Y){r=Y}}),(Y,ye)=>K[ye]=Y,Y=>K==null?void 0:K[Y],()=>[J])}),A(f,h)},f=>{var h=tt(),I=Se(h);he(I,()=>t(v)==3,q=>{_r(q,{config:r,buggy:l})},q=>{lr(q,{config:r,get selectedTheme(){return t(n)},set selectedTheme(X){_(n,U(X))}})},!0),A(f,h)},!0),A(P,o)}),s(Ie);var ze=c(Ie,2),Ze=i(ze);he(Ze,()=>t(v)==2,P=>{var o=hr(),d=Se(o);d.__click=N;var f=c(d,2);f.__click=fe;var h=c(f,2);he(h,()=>t(p),I=>{var q=mr();q.__click=()=>{_(p,!1),l.value=[]},A(I,q)},I=>{var q=xr();q.__click=[pr,p],A(I,q)}),F(()=>{Te(d,`btn ${(t(C)?t(L)?"btn-error":"btn-success":"btn-secondary")??""} h-full text-xl`),Te(f,`btn ${(t(m)?t(H)?"btn-error":"btn-success":"btn-primary")??""} h-full text-xl`),le(f,"btn-disabled",!t(oe))}),A(P,o)},P=>{var o=tt(),d=Se(o);he(d,()=>t(v)==1,f=>{var h=wr(),I=Se(h),q=i(I);s(I),Pt(I,(se,Y)=>z(se,Y),()=>({timeframe:300,handler:ee}));var X=c(I,2);X.__click=()=>{t(g)>0?M(!0):(r.value.startTime=new Date().toUTCString(),x()),_(g,U(t(g)==0?1:0))};var J=i(X,!0);s(X);var ie=c(X,2);ie.__click=T;var pe=i(ie);s(ie),F(()=>{le(I,"btn-error",t(g)>0&&!t(W)),le(I,"btn-warning",t(g)>0&&t(W)),le(I,"btn-disabled",t(g)==0),R(q,`Record ${(t(W)?"Pause":"Stop")??""}`),le(X,"btn-success",t(g)>0),le(X,"btn-primary",t(g)==0),le(X,"btn-disabled",t(g)>0&&!t(B)[K.length-1].followCarSeen&&t(k).length==0),R(J,t(g)>0?"Mark Clear":"Start Round"),ie.disabled=D,R(pe,`${(t(b)?"Enable":"Hide")??""} IDing`)}),Ot("tapOrPress",I,se=>{_(W,U(se))}),A(f,h)},null,!0),A(P,o)}),s(ze);var qe=c(ze,2),Fe=i(qe),Be=i(Fe),He=c(i(Be),2);ne(He,17,()=>t(k),ce,(P,o)=>{var d=yr(),f=Se(d),h=i(f);F(()=>R(h,`${(t(o).stopOrPause?"Stop":"Pause")??""} at ${new Date(t(o).time).toLocaleTimeString()??""}`)),s(f);var I=c(f,2);Ce(I),et(I,()=>t(o).info,q=>t(o).info=q),A(P,d)});var at=c(He,2),Xe=i(at);Xe.__click=[Sr,W],s(at),s(Be),s(Fe),s(qe),vt(qe,P=>_(u,P),()=>t(u)),s(ve);var Je=c(ve,2),Pe=i(Je);Pe.__click=[Tr,v];var it=i(Pe);re(it,{icon:Il}),We(2),s(Pe);var Ae=c(Pe,2);Ae.__click=[kr,v];var nt=i(Ae);re(nt,{icon:Ll}),We(2),s(Ae);var Ge=c(Ae,2);Ge.__click=[Dr,v];var lt=i(Ge);re(lt,{icon:Ol}),We(2),s(Ge);var rt=c(Ge,2);rt.__click=[Mr,v];var gt=i(rt);re(gt,{icon:xt}),We(2),s(rt),s(Je),s(ke),F(()=>{te(be,"aria-label",t(n)),el(be,t(n)),le(_e,"btn-secondary",!t(V)),le(_e,"btn-error",t(V)),R(Me,t(V)?"Clear":"Undo"),Te(Ie,`flex flex-col overflow-y-auto py-3 ${(t(v)==0||t(v)==3?"row-span-10":"row-span-8")??""}`),Te(ze,`${(t(v)==0||t(v)==3?"hidden":"row-span-2")??""} grid grid-flow-col grid-cols-3 gap-x-3`),le(Pe,"dock-active",t(v)==0),le(Ae,"dock-active",t(v)==1),le(Ge,"dock-active",t(v)==2),le(rt,"dock-active",t(v)==3)}),Qe(me,()=>t($),P=>_($,P)),Ot("tapOrPress",_e,P=>{_(V,U(P.detail.newState))}),A(a,Le),Ye()}st(["click"]);export{Rr as component};
