var ha=Object.defineProperty;var Xt=a=>{throw TypeError(a)};var wa=(a,e,l)=>e in a?ha(a,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[e]=l;var qt=(a,e,l)=>wa(a,typeof e!="symbol"?e+"":e,l),ya=(a,e,l)=>e.has(a)||Xt("Cannot "+l);var St=(a,e,l)=>(ya(a,e,"read from private field"),l?l.call(a):e.get(a)),Gt=(a,e,l)=>e.has(a)?Xt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,l);import{a as E,t as Y,c as tt,n as ht}from"../chunks/disclose-version.CKmHfcQQ.js";import{G as ia,F as At,w as Sa,a4 as ka,l as Ta,ap as na,q as Ee,M as kt,J as Da,ak as oa,K as Ia,L as Jt,N as Tt,v as ct,aq as mt,H as ca,m as da,I as Ma,Q as Ea,C as Kt,ar as Rt,as as Vt,at as Nt,au as Aa,a3 as Pa,y as Qt,av as La,aj as Ca,aw as Oa,o as Ra,a5 as Na,ag as za,ab as Fa,ax as Ha,ae as Ba,O as zt,b as ja,P as Ft,e as Ve,ay as Ua,az as Ya,aA as Xa,aB as qa,aC as Ga,an as F,g as t,A as _,a as Ja,p as Be,j as i,k as r,s as o,t as z,i as je,f as we,aD as Dt,aE as Ka,h as Le,aF as It,aG as We}from"../chunks/runtime.CCv0MKOs.js";import{d as at,a as N,e as Pt}from"../chunks/store.ClLhcO0h.js";import{c as Va,a as U,p as le,i as Te,b as it}from"../chunks/props.Bz_VZYiK.js";import{i as Qa}from"../chunks/lifecycle.BcNaCV50.js";function $e(a,e=!1){return pt(a,new Map)}function pt(a,e,l,s){if(typeof a=="object"&&a!==null){const v=e.get(a);if(v!==void 0)return v;if(a instanceof Map)return new Map(a);if(a instanceof Set)return new Set(a);if(ia(a)){const u=[];e.set(a,u);for(let g=0;g<a.length;g+=1)u.push(pt(a[g],e));return u}if(At(a)===Sa){const u={};e.set(a,u);for(var n in a)u[n]=pt(a[n],e);return u}if(a instanceof Date)return structuredClone(a);if(typeof a.toJSON=="function")return pt(a.toJSON(),e)}if(a instanceof EventTarget)return a;try{return structuredClone(a)}catch{return a}}let Mt=null;function be(a,e){return e}function Wa(a,e,l,s){for(var n=[],v=e.length,u=0;u<v;u++)La(e[u].e,n,!0);var g=v>0&&n.length===0&&l!==null;if(g){var w=l.parentNode;Ca(w),w.append(l),s.clear(),Qe(a,e[0].prev,e[v-1].next)}Oa(n,()=>{for(var h=0;h<v;h++){var y=e[h];g||(s.delete(y.k),Qe(a,y.prev,y.next)),Ra(y.e,!g)}})}function fe(a,e,l,s,n,v=null){var u=a,g={flags:e,items:new Map,first:null},w=(e&na)!==0;if(w){var h=a;u=Ee?kt(Na(h)):h.appendChild(ka())}Ee&&Da();var y=null,A=!1;Ta(()=>{var b=l(),T=ia(b)?b:b==null?[]:oa(b),p=T.length;if(A&&p===0)return;A=p===0;let H=!1;if(Ee){var P=u.data===Ia;P!==(p===0)&&(u=Jt(),kt(u),Tt(!1),H=!0)}if(Ee){for(var m=null,X,B=0;B<p;B++){if(ct.nodeType===8&&ct.data===za){u=ct,H=!0,Tt(!1);break}var k=T[B],D=s(k,B);X=va(ct,g,m,null,k,D,B,n,e),g.items.set(D,X),m=X}p>0&&kt(Jt())}if(!Ee){var ce=Fa;Za(T,g,u,n,e,(ce.f&mt)!==0,s)}v!==null&&(p===0?y?ca(y):y=da(()=>v(u)):y!==null&&Ma(y,()=>{y=null})),H&&Tt(!0),l()}),Ee&&(u=ct)}function Za(a,e,l,s,n,v,u){var M,L,W,j;var g=(n&Ha)!==0,w=(n&(Rt|Nt))!==0,h=a.length,y=e.items,A=e.first,b=A,T,p=null,H,P=[],m=[],X,B,k,D;if(g)for(D=0;D<h;D+=1)X=a[D],B=u(X,D),k=y.get(B),k!==void 0&&((M=k.a)==null||M.measure(),(H??(H=new Set)).add(k));for(D=0;D<h;D+=1){if(X=a[D],B=u(X,D),k=y.get(B),k===void 0){var ce=b?b.e.nodes_start:l;p=va(ce,e,p,p===null?e.first:p.next,X,B,D,s,n),y.set(B,p),P=[],m=[],b=p.next;continue}if(w&&$a(k,X,D,n),k.e.f&mt&&(ca(k.e),g&&((L=k.a)==null||L.unfix(),(H??(H=new Set)).delete(k))),k!==b){if(T!==void 0&&T.has(k)){if(P.length<m.length){var $=m[0],Q;p=$.prev;var ee=P[0],me=P[P.length-1];for(Q=0;Q<P.length;Q+=1)Wt(P[Q],$,l);for(Q=0;Q<m.length;Q+=1)T.delete(m[Q]);Qe(e,ee.prev,me.next),Qe(e,p,ee),Qe(e,me,$),b=$,p=me,D-=1,P=[],m=[]}else T.delete(k),Wt(k,b,l),Qe(e,k.prev,k.next),Qe(e,k,p===null?e.first:p.next),Qe(e,p,k),p=k;continue}for(P=[],m=[];b!==null&&b.k!==B;)(v||!(b.e.f&mt))&&(T??(T=new Set)).add(b),m.push(b),b=b.next;if(b===null)continue;k=b}P.push(k),p=k,b=k.next}if(b!==null||T!==void 0){for(var pe=T===void 0?[]:oa(T);b!==null;)(v||!(b.e.f&mt))&&pe.push(b),b=b.next;var xe=pe.length;if(xe>0){var S=n&na&&h===0?l:null;if(g){for(D=0;D<xe;D+=1)(W=pe[D].a)==null||W.measure();for(D=0;D<xe;D+=1)(j=pe[D].a)==null||j.fix()}Wa(e,pe,S,y)}}g&&Ea(()=>{var re;if(H!==void 0)for(k of H)(re=k.a)==null||re.apply()}),Kt.first=e.first&&e.first.e,Kt.last=p&&p.e}function $a(a,e,l,s){s&Rt&&Vt(a.v,e),s&Nt?Vt(a.i,l):a.i=l}function va(a,e,l,s,n,v,u,g,w){var h=Mt;try{var y=(w&Rt)!==0,A=(w&Aa)===0,b=y?A?Pa(n):Qt(n):n,T=w&Nt?Qt(u):u,p={i:T,v:b,k:v,a:null,e:null,prev:l,next:s};return Mt=p,p.e=da(()=>g(a,b,T),Ee),p.e.prev=l&&l.e,p.e.next=s&&s.e,l===null?e.first=p:(l.next=p,l.e.next=p.e),s!==null&&(s.prev=p,s.e.prev=p.e),p}finally{Mt=h}}function Wt(a,e,l){for(var s=a.next?a.next.e.nodes_start:l,n=e?e.e.nodes_start:l,v=a.e.nodes_start;v!==s;){var u=Ba(v);n.before(v),v=u}}function Qe(a,e,l){e===null?a.first=l:(e.next=l,e.e.next=l&&l.e),l!==null&&(l.prev=e,l.e.prev=e&&e.e)}function Lt(a,e,l){zt(()=>{var s=ja(()=>e(a,l==null?void 0:l())||{});if(l&&(s!=null&&s.update)){var n=!1,v={};Ft(()=>{var u=l();Ve(u),n&&Ua(v,u)&&(v=u,s.update(u))}),n=!0}if(s!=null&&s.destroy)return()=>s.destroy()})}let Zt=!1;function ua(){Zt||(Zt=!0,document.addEventListener("reset",a=>{Promise.resolve().then(()=>{var e;if(!a.defaultPrevented)for(const l of a.target.elements)(e=l.__on_r)==null||e.call(l)})},{capture:!0}))}function ze(a){if(Ee){var e=!1,l=()=>{if(!e){if(e=!0,a.hasAttribute("value")){var s=a.value;Z(a,"value",null),a.value=s}if(a.hasAttribute("checked")){var n=a.checked;Z(a,"checked",null),a.checked=n}}};a.__on_r=l,Ya(l),ua()}}function el(a,e){var l=a.__attributes??(a.__attributes={});l.value===(l.value=e)||a.value===e&&(e!==0||a.nodeName!=="PROGRESS")||(a.value=e)}function Z(a,e,l,s){var n=a.__attributes??(a.__attributes={});Ee&&(n[e]=a.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&a.nodeName==="LINK")||n[e]!==(n[e]=l)&&(e==="style"&&"__styles"in a&&(a.__styles={}),e==="loading"&&(a[Xa]=l),l==null?a.removeAttribute(e):typeof l!="string"&&tl(a).includes(e)?a[e]=l:a.setAttribute(e,l))}var $t=new Map;function tl(a){var e=$t.get(a.nodeName);if(e)return e;$t.set(a.nodeName,e=[]);for(var l,s=At(a),n=Element.prototype;n!==s;){l=qa(s);for(var v in l)l[v].set&&e.push(v);s=At(s)}return e}function al(a,e){var l=a.__className,s=fa(e);Ee&&a.getAttribute("class")===s?a.__className=s:(l!==s||Ee&&a.getAttribute("class")!==s)&&(s===""?a.removeAttribute("class"):a.setAttribute("class",s),a.__className=s)}function Ce(a,e){var l=a.__className,s=fa(e);Ee&&a.className===s?a.__className=s:(l!==s||Ee&&a.className!==s)&&(e==null?a.removeAttribute("class"):a.className=s,a.__className=s)}function fa(a){return a??""}function ie(a,e,l){if(l){if(a.classList.contains(e))return;a.classList.add(e)}else{if(!a.classList.contains(e))return;a.classList.remove(e)}}function Ht(a,e,l,s=l){a.addEventListener(e,l);const n=a.__on_r;n?a.__on_r=()=>{n(),s()}:a.__on_r=s,ua()}function et(a,e,l=e){var s=Ga();Ht(a,"input",()=>{var n=ea(a)?ta(a.value):a.value;l(n),s&&n!==(n=e())&&(a.value=n??"")}),Ft(()=>{var n=e();if(Ee&&a.defaultValue!==a.value){l(a.value);return}ea(a)&&n===ta(a.value)||a.type==="date"&&!n&&!a.value||n!==a.value&&(a.value=n??"")})}function Et(a,e,l=e){Ht(a,"change",()=>{var s=a.checked;l(s)}),e()==null&&l(!1),Ft(()=>{var s=e();a.checked=!!s})}function ea(a){var e=a.type;return e==="number"||e==="range"}function ta(a){return a===""?null:+a}function ga(a,e,l){if(a.multiple)return rl(a,e);for(var s of a.options){var n=vt(s);if(Va(n,e)){s.selected=!0;return}}(!l||e!==void 0)&&(a.selectedIndex=-1)}function ll(a,e){zt(()=>{var l=new MutationObserver(()=>{var s=a.__value;ga(a,s)});return l.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{l.disconnect()}})}function Xe(a,e,l=e){var s=!0;Ht(a,"change",()=>{var n;if(a.multiple)n=[].map.call(a.querySelectorAll(":checked"),vt);else{var v=a.querySelector(":checked");n=v&&vt(v)}l(n)}),zt(()=>{var n=e();if(ga(a,n,s),s&&n===void 0){var v=a.querySelector(":checked");v!==null&&(n=vt(v),l(n))}a.__value=n,s=!1}),ll(a)}function rl(a,e){for(var l of a.options)l.selected=~e.indexOf(vt(l))}function vt(a){return"__value"in a?a.__value:a.value}const sl=300,il=4,nl="none";function ol(a){return Array.isArray(a)?a:[a]}function dt(a,e,l){return a.addEventListener(e,l),()=>a.removeEventListener(e,l)}function cl(a,e){return e.filter(l=>a.pointerId!==l.pointerId)}function bt(a,e,l,s,n){const v=a.getBoundingClientRect(),u=Math.round(l.clientX-v.left),g=Math.round(l.clientY-v.top);a.dispatchEvent(new CustomEvent(`${e}${n}`,{detail:{event:l,pointersCount:s.length,target:l.target,x:u,y:g}}))}function _a(a,e,l,s,n,v=nl){e.style.touchAction=ol(v).join(" ");let u=[];function g(h){u.push(h),bt(e,a,h,u,"down"),s==null||s(u,h);const y=h.pointerId;function A(m){y===m.pointerId&&(u=cl(m,u),u.length||b(),bt(e,a,m,u,"up"),n==null||n(u,m))}function b(){T(),p(),H(),P()}const T=dt(e,"pointermove",m=>{u=u.map(X=>m.pointerId===X.pointerId?m:X),bt(e,a,m,u,"move"),l==null||l(u,m)}),p=dt(e,"lostpointercapture",m=>{A(m)}),H=dt(e,"pointerup",m=>{A(m)}),P=dt(e,"pointerleave",m=>{u=[],b(),bt(e,a,m,u,"up"),n==null||n(u,m)})}const w=dt(e,"pointerdown",g);return{destroy:()=>{w()}}}function dl(a,e){const l={composed:!1,timeframe:sl,triggerBeforeFinished:!1,spread:il,touchAction:"auto",...e};a.style.userSelect="none",a.oncontextmenu=P=>{P.preventDefault()};const s="press";let n,v,u;const g={x:0,y:0};let w,h=!1,y=!1;function A(P,m,X){if(Math.abs(P-v)<l.spread&&Math.abs(m-u)<l.spread&&Date.now()-n>l.timeframe){const B=a.getBoundingClientRect(),k=Math.round(P-B.left),D=Math.round(m-B.top);y=!0,a.dispatchEvent(new CustomEvent(s,{detail:{x:k,y:D,target:X.target,pointerType:X.pointerType}}))}}function b(P,m){clearTimeout(w),h||A(m.clientX,m.clientY,m)}function T(P,m){return g.x=m.clientX,g.y=m.clientY,y}function p(P,m){y=!1,v=m.clientX,u=m.clientY,n=Date.now(),h=!1,g.x=m.clientX,g.y=m.clientY,l.triggerBeforeFinished&&(w=setTimeout(()=>{h=!0,A(g.x,g.y,m)},l.timeframe+1))}const H=_a(s,a,T,p,b,l.touchAction);return l.composed?{onMove:T,onDown:p,onUp:b}:{destroy:()=>{H.destroy(),clearTimeout(w)}}}var ft;class vl{constructor(e,l){Gt(this,ft,F());qt(this,"key","");this.key=e,this.value=l;{const s=localStorage.getItem(e);s&&(this.value=this.deserialize(s))}Ja(()=>{localStorage.setItem(this.key,this.serialize(this.value))})}get value(){return t(St(this,ft))}set value(e){_(St(this,ft),U(e))}update(){{const e=localStorage.getItem(this.key);e&&(this.value=this.deserialize(e))}}serialize(e){return JSON.stringify(e)}deserialize(e){return JSON.parse(e)}}ft=new WeakMap;function ut(a,e){return new vl(a,e)}var ul=(a,e)=>{_(e,!t(e))},fl=Y('<div class="mx-auto flex flex-col"><div class="tooltip"><div class="tooltip-content"> </div> <div class="avatar"><div class="w-15 rounded text-lg"><img></div></div></div></div>');function gl(a,e){Be(e,!0);let l=F(!1);var s=fl();s.__click=[ul,l];var n=i(s),v=i(n),u=i(v,!0);r(v);var g=o(v,2),w=i(g),h=i(w);r(w),r(g),r(n),r(s),z(()=>{ie(n,"tooltip-open",t(l)),N(u,e.buggy.buggyTitle),Z(h,"alt",e.buggy.buggyTitle),Z(h,"src","https://cmubuggy.org/api/buggyimg/"+e.buggy.buggyId+"?size=Th")}),E(a,s),je()}at(["click"]);const _l=(a,e,l)=>{e(!e()),l.operatorLastIdUpdateFunc(new Date().toUTCString())};var bl=(a,e)=>e(a.target.value),ml=Y("<option> </option>"),pl=(a,e,l,s,n)=>{t(e).close(),l(t(s).buggyid,t(s).name+" ("+t(n)+")")},xl=Y('<div class="card bg-base-300 card-sm shadow-sm"><figure><img alt=""></figure> <div class="card-body"><h2 class="card-title"> </h2> <div class="card-actions justify-center"><button class="btn btn-primary">Select</button></div></div></div>'),hl=(a,e)=>e(void 0,void 0),wl=Y('<dialog class="modal"><div class="modal-box"><fieldset class="fieldset bg-base-100 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg">Buggy Selection</legend> <label class="fieldset-label text-base">Organization</label> <select class="select select-lg"></select> <label class="fieldset-label text-base">Buggy</label> <div class="mx-auto flex max-h-[50svh] w-fit flex-row flex-wrap gap-x-3 gap-y-4 overflow-scroll"></div> <form method="dialog"><button class="btn btn-error btn-block">Cancel</button></form></fieldset></div></dialog>'),yl=Y('<div class="text-light bg-base-300 flex flex-initial flex-col justify-around space-x-1 rounded-sm p-2 shadow-xl"><!> <div class="flex flex-row justify-around"><div class="my-auto font-mono text-xl italic"> </div> <div class="my-auto font-mono text-xl"> </div></div></div>'),Sl=(a,e,l,s,n,v)=>{t(e)?(l(),_(e,!1)):s.idx==0&&s.config.value.showImages?t(n).showModal():v(void 0,void 0)},kl=Y('<div class="grid shrink-0 basis-1/3 grid-flow-row grid-cols-12 py-3"><!> <div class="col-span-1 [text-orientation:sideways] [writing-mode:vertical-lr]"><div class="rotate-180 touch-manipulation text-center"><div class="flex flex-row items-center justify-center gap-3"><div class="inline-grid *:[grid-area:1/1]"><div></div></div> <p> </p></div></div></div> <div class="col-span-7 grid grid-flow-col grid-cols-2 grid-rows-3 gap-x-1 gap-y-1.5 p-1"></div> <div class="col-span-4 mx-2 flex flex-col space-y-1"><div class="flex grow-10 flex-row gap-2"><button class="btn h-full grow text-lg"> </button></div> <button> </button></div></div>');function Tl(a,e){Be(e,!0);let l=le(e,"followRecorded",15),s=le(e,"didID",15),n={AEPi:"AEP",Apex:"APX",Atlas:"ATL",CIA:"CIA",DG:"DG",Fringe:"FRI",PiKA:"PKA",Robobuggy:"RBO",SAE:"SAE",SDC:"SDC",SigEp:"SEP",SigNu:"SN",Spirit:"SPI"},v=we(()=>e.buggies.length.valueOf()),u=F(void 0),g=F(""),w=F(void 0),h=async C=>{const O=await fetch("https://cmubuggy.org/api/orgbuggylist/"+C);O.ok&&O.json().then(q=>{_(w,U(q))})},y=we(()=>!l()&&t(v)<Math.min(6,e.maxBuggies-e.prevFollowRecorded)),A=we(()=>!l()&&e.prevFollowRecorded),b=F(!1),T=(C,O)=>{t(y)&&(e.buggies.push({time:new Date,number:e.buggies.length+1,buggyId:C,buggyTitle:O}),e.undoList.push(e.idx))},p=C=>{t(A)&&(e.buggies.push({time:new Date,number:"F"}),l(!0),e.undoList.push(e.idx))};const H=()=>{l()&&l(!1),e.buggies.pop()};let P=C=>{if(C.number=="1"||C.number=="F"){let O=C.time-e.startTime,q=Math.ceil(O/1e3)%60;return`@${Math.floor(Math.max(O/1e3-q,0)/60)}:${String(q).padStart(2,"0")}`}else{let O=e.buggies[e.buggies.indexOf(C)-1],q=C.time-O.time,de=Math.floor(q/1e3)%60;return`+${Math.floor(Math.max(q/1e3-de,0)/60)}:${String(Math.floor(de)).padStart(2,"0")}`}},m=C=>{let O=!1,q=!1,de=new Date;return e.config.value.operators.forEach(se=>{if(se.station==C){let te=Math.max(Math.floor(de-new Date(se.lastId)/6e4),0);se.isPrimary&&te>=12?O=!0:te>=12&&(q=!0)}}),O?"status-error":q?"status-warning":"status-success"},X=F(U(m(e.name)));setTimeout(()=>_(X,U(m(e.name))),6e4);var B=kl(),k=i(B);Te(k,()=>e.idx==0&&e.config.value.showImages,C=>{var O=wl(),q=i(O),de=i(q),se=o(i(de),4);se.__change=[bl,h],fe(se,21,()=>e.config.value.teams,be,(ve,ae)=>{var ge=ml(),Se={},De=i(ge,!0);r(ge),z(()=>{Se!==(Se=n[t(ae)])&&(ge.value=(ge.__value=n[t(ae)])==null?"":n[t(ae)]),N(De,t(ae))}),E(ve,ge)}),r(se);var te=o(se,4);fe(te,21,()=>t(w),be,(ve,ae)=>{var ge=xl(),Se=i(ge),De=i(Se);r(Se);var he=o(Se,2),ke=i(he),Ie=i(ke);r(ke);var Ae=o(ke,2),Oe=i(Ae);Oe.__click=[pl,u,T,ae,g],r(Ae),r(he),r(ge),z(()=>{Z(De,"src","https://cmubuggy.org/api/buggyimg/"+t(ae).buggyid+"?size=Th"),N(Ie,`${t(ae).name??""} (${t(ae).birthyear??""})`)}),E(ve,ge)}),r(te);var ye=o(te,2),ne=i(ye);ne.__click=[hl,T],r(ye),r(de),r(q),r(O),it(O,ve=>_(u,ve),()=>t(u)),Xe(se,()=>t(g),ve=>_(g,ve)),E(C,O)});var D=o(k,2),ce=i(D),$=i(ce),Q=i($),ee=i(Q);r(Q);var me=o(Q,2),pe=i(me,!0);r(me),r($),r(ce),r(D);var xe=o(D,2);fe(xe,21,()=>e.buggies,C=>C.number,(C,O)=>{var q=yl(),de=i(q);Te(de,()=>t(O).buggyId&&e.config.value.showImages,ae=>{gl(ae,{get buggy(){return t(O)}})});var se=o(de,2),te=i(se),ye=i(te,!0);r(te);var ne=o(te,2),ve=i(ne,!0);z(()=>N(ve,P(t(O)))),r(ne),r(se),r(q),z(()=>N(ye,t(O).number)),E(C,q)}),r(xe);var S=o(xe,2),M=i(S),L=i(M);L.__click=[Sl,b,p,e,u,T];var W=i(L);r(L),Lt(L,(C,O)=>dl(C,O),()=>({timeframe:300,triggerBeforeFinished:!0})),r(M);var j=o(M,2);j.__click=[_l,s,e];var re=i(j,!0);return r(j),r(S),r(B),z(()=>{Ce(ee,`status ${t(X)??""}`),N(pe,e.name),L.disabled=!t(y)&&!t(A),ie(L,"btn-primary",t(y)||t(A)),N(W,`Record ${(t(y)&&!t(b)?e.buggies.length+1:"F")??""}`),Ce(j,`btn ${(s()?"btn-success":"btn-secondary")??""} grow-1 text-xl`),ie(j,"hidden",e.idHidden),N(re,s()?"ID'd":"ID?")}),Pt("press",L,()=>{_(b,!0)}),E(a,B),je({removeLastBuggy:H})}at(["change","click"]);var Dl=Y('<div class="text-light bg-base-300 flex flex-initial flex-row justify-around space-x-1 rounded-sm px-1 shadow-xl"><div class="my-auto text-xl"> </div> <div class="my-auto font-mono text-xl"> </div></div>'),Il=Y('<fieldset class="fieldset bg-base-100 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg"> </legend> <div class="flex-overflow flex flex-wrap gap-2"></div></fieldset>');function Ml(a,e){Be(e,!0);let l=(g,w,h)=>{if(g.number=="1"||g.number=="F"){let y=new Date(g.time)-e.startTime,A=Math.ceil(y/1e3)%60;return`@${Math.floor(Math.max(y/1e3-A,0)/60)}:${String(A).padStart(2,"0")}`}else{let y=h[h.indexOf(g)-1],A=new Date(g.time)-new Date(y.time),b=Math.floor(A/1e3)%60;return`+${Math.floor(Math.max(A/1e3-b,0)/60)}:${String(b).padStart(2,"0")}`}};var s=Il(),n=i(s),v=i(n,!0);r(n);var u=o(n,2);fe(u,21,()=>e.buggies,be,(g,w,h)=>{var y=Dl(),A=i(y),b=i(A,!0);r(A);var T=o(A,2),p=i(T,!0);z(()=>N(p,l(t(w),h,e.buggies))),r(T),r(y),z(()=>N(b,t(w).number)),E(g,y)}),r(u),r(s),z(()=>N(v,e.name)),E(a,s),je()}function aa(a,e){e&&e!=="lg"&&e!=="sm"&&e!=="xs"?a.style.fontSize=e.replace("x","em"):a.style.fontSize=""}function El(a,e,l,s,n,v=1,u="",g=""){let w=1,h=1;n&&(n=="horizontal"?w=-1:n=="vertical"?h=-1:w=h=-1),typeof a=="string"&&(a=parseFloat(a)),typeof e=="string"&&(e=parseFloat(e)),typeof l=="string"&&(l=parseFloat(l));const y=`${e*v}${u}`,A=`${l*v}${u}`;let b=`translate(${y},${A}) scale(${w*a},${h*a})`;return s&&(b+=` rotate(${s}${g})`),b}var Al=ht('<title class="svelte-bvo74f"> </title>'),Pl=ht('<path class="svelte-bvo74f"></path>'),Ll=ht('<path class="svelte-bvo74f"></path><path class="svelte-bvo74f"></path>',1),Cl=ht('<svg aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg"><!><g class="svelte-bvo74f"><g class="svelte-bvo74f"><!></g></g></svg>');function oe(a,e){Be(e,!1);const l=It(),s=It();let n=le(e,"class",24,()=>{}),v=le(e,"id",24,()=>{}),u=le(e,"style",24,()=>{}),g=le(e,"icon",8),w=le(e,"title",24,()=>{}),h=le(e,"size",24,()=>{}),y=le(e,"color",24,()=>{}),A=le(e,"fw",8,!1),b=le(e,"pull",24,()=>{}),T=le(e,"scale",8,1),p=le(e,"translateX",8,0),H=le(e,"translateY",8,0),P=le(e,"rotate",24,()=>{}),m=le(e,"flip",24,()=>{}),X=le(e,"spin",8,!1),B=le(e,"pulse",8,!1),k=le(e,"primaryColor",8,""),D=le(e,"secondaryColor",8,""),ce=le(e,"primaryOpacity",8,1),$=le(e,"secondaryOpacity",8,.4),Q=le(e,"swapOpacity",8,!1),ee=It();Dt(()=>(t(ee),Ve(h()),aa),()=>{t(ee)&&h()&&aa(t(ee),h())}),Dt(()=>Ve(g()),()=>{_(l,g()&&g().icon||[0,0,"",[],""])}),Dt(()=>(Ve(T()),Ve(p()),Ve(H()),Ve(P()),Ve(m())),()=>{_(s,El(T(),p(),H(),P(),m(),512))}),Ka(),Qa();var me=tt(),pe=Le(me);Te(pe,()=>t(l)[4],xe=>{var S=Cl(),M=i(S);Te(M,w,re=>{var C=Al(),O=i(C,!0);r(C),z(()=>N(O,w())),E(re,C)});var L=o(M),W=i(L),j=i(W);Te(j,()=>typeof t(l)[4]=="string",re=>{var C=Pl();z(()=>{Z(C,"d",t(l)[4]),Z(C,"fill",y()||k()||"currentColor"),Z(C,"transform",`translate(${t(l)[0]/-2} ${t(l)[1]/-2})`)}),E(re,C)},re=>{var C=Ll(),O=Le(C),q=o(O);z(()=>{Z(O,"d",t(l)[4][0]),Z(O,"fill",D()||y()||"currentColor"),Z(O,"fill-opacity",Q()!=!1?ce():$()),Z(O,"transform",`translate(${t(l)[0]/-2} ${t(l)[1]/-2})`),Z(q,"d",t(l)[4][1]),Z(q,"fill",k()||y()||"currentColor"),Z(q,"fill-opacity",Q()!=!1?$():ce()),Z(q,"transform",`translate(${t(l)[0]/-2} ${t(l)[1]/-2})`)}),E(re,C)}),r(W),r(L),r(S),it(S,re=>_(ee,re),()=>t(ee)),z(()=>{Z(S,"id",v()),al(S,`svelte-fa svelte-fa-base ${n()??""} svelte-bvo74f`),Z(S,"style",u()),Z(S,"viewBox",`0 0 ${t(l)[0]??""} ${t(l)[1]??""}`),ie(S,"pulse",B()),ie(S,"svelte-fa-size-lg",h()==="lg"),ie(S,"svelte-fa-size-sm",h()==="sm"),ie(S,"svelte-fa-size-xs",h()==="xs"),ie(S,"svelte-fa-fw",A()),ie(S,"svelte-fa-pull-left",b()==="left"),ie(S,"svelte-fa-pull-right",b()==="right"),ie(S,"spin",X()),Z(L,"transform",`translate(${t(l)[0]/2} ${t(l)[1]/2})`),Z(L,"transform-origin",`${t(l)[0]/4} 0`),Z(W,"transform",t(s))}),E(xe,S)}),E(a,me),je()}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const Ol={prefix:"fas",iconName:"pencil",icon:[512,512,[9999,61504,"pencil-alt"],"f303","M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1 0 32c0 8.8 7.2 16 16 16l32 0zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"]},Rl={prefix:"fas",iconName:"sitemap",icon:[576,512,[],"f0e8","M208 80c0-26.5 21.5-48 48-48l64 0c26.5 0 48 21.5 48 48l0 64c0 26.5-21.5 48-48 48l-8 0 0 40 152 0c30.9 0 56 25.1 56 56l0 32 8 0c26.5 0 48 21.5 48 48l0 64c0 26.5-21.5 48-48 48l-64 0c-26.5 0-48-21.5-48-48l0-64c0-26.5 21.5-48 48-48l8 0 0-32c0-4.4-3.6-8-8-8l-152 0 0 40 8 0c26.5 0 48 21.5 48 48l0 64c0 26.5-21.5 48-48 48l-64 0c-26.5 0-48-21.5-48-48l0-64c0-26.5 21.5-48 48-48l8 0 0-40-152 0c-4.4 0-8 3.6-8 8l0 32 8 0c26.5 0 48 21.5 48 48l0 64c0 26.5-21.5 48-48 48l-64 0c-26.5 0-48-21.5-48-48l0-64c0-26.5 21.5-48 48-48l8 0 0-32c0-30.9 25.1-56 56-56l152 0 0-40-8 0c-26.5 0-48-21.5-48-48l0-64z"]},xt={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},Nl={prefix:"fas",iconName:"id-badge",icon:[384,512,[],"f2c1","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-384c0-35.3-28.7-64-64-64L64 0zm96 320l64 0c44.2 0 80 35.8 80 80c0 8.8-7.2 16-16 16L96 416c-8.8 0-16-7.2-16-16c0-44.2 35.8-80 80-80zm-32-96a64 64 0 1 1 128 0 64 64 0 1 1 -128 0zM144 64l96 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-96 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},zl={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},Ct={prefix:"fas",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},Ot={prefix:"fas",iconName:"id-card",icon:[576,512,[62147,"drivers-license"],"f2c2","M0 96l576 0c0-35.3-28.7-64-64-64L64 32C28.7 32 0 60.7 0 96zm0 32L0 416c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-288L0 128zM64 405.3c0-29.5 23.9-53.3 53.3-53.3l117.3 0c29.5 0 53.3 23.9 53.3 53.3c0 5.9-4.8 10.7-10.7 10.7L74.7 416c-5.9 0-10.7-4.8-10.7-10.7zM176 192a64 64 0 1 1 0 128 64 64 0 1 1 0-128zm176 16c0-8.8 7.2-16 16-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16zm0 64c0-8.8 7.2-16 16-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16zm0 64c0-8.8 7.2-16 16-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16z"]},Fl={prefix:"fas",iconName:"house",icon:[576,512,[127968,63498,63500,"home","home-alt","home-lg-alt"],"f015","M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c0 2.7-.2 5.4-.5 8.1l0 16.2c0 22.1-17.9 40-40 40l-16 0c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1L416 512l-24 0c-22.1 0-40-17.9-40-40l0-24 0-64c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 64 0 24c0 22.1-17.9 40-40 40l-24 0-31.9 0c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2l-16 0c-22.1 0-40-17.9-40-40l0-112c0-.9 0-1.9 .1-2.8l0-69.7-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"]},Hl=Fl,la={prefix:"fas",iconName:"arrow-down",icon:[384,512,[8595],"f063","M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},Bl={prefix:"fas",iconName:"inbox",icon:[512,512,[],"f01c","M121 32C91.6 32 66 52 58.9 80.5L1.9 308.4C.6 313.5 0 318.7 0 323.9L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-92.1c0-5.2-.6-10.4-1.9-15.5l-57-227.9C446 52 420.4 32 391 32L121 32zm0 64l270 0 48 192-51.2 0c-12.1 0-23.2 6.8-28.6 17.7l-14.3 28.6c-5.4 10.8-16.5 17.7-28.6 17.7l-120.4 0c-12.1 0-23.2-6.8-28.6-17.7l-14.3-28.6c-5.4-10.8-16.5-17.7-28.6-17.7L73 288 121 96z"]},ra={prefix:"fas",iconName:"arrow-up",icon:[384,512,[8593],"f062","M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2 160 448c0 17.7 14.3 32 32 32s32-14.3 32-32l0-306.7L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z"]},ba={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},jl={prefix:"fas",iconName:"sign-hanging",icon:[512,512,["sign"],"f4d9","M96 0c17.7 0 32 14.3 32 32l0 32 352 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-352 0 0 352c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-352-32 0C14.3 128 0 113.7 0 96S14.3 64 32 64l32 0 0-32C64 14.3 78.3 0 96 0zm96 160l256 0c17.7 0 32 14.3 32 32l0 160c0 17.7-14.3 32-32 32l-256 0c-17.7 0-32-14.3-32-32l0-160c0-17.7 14.3-32 32-32z"]},Ul=jl,Yl={prefix:"fas",iconName:"circle-xmark",icon:[512,512,[61532,"times-circle","xmark-circle"],"f057","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]};var Xl=(a,e)=>e.removeEntry(e.idx),ql=Y('<label id="org-select" class="fieldset-label text-base"> </label> <input type="text" class="input">',1),Gl=Y('<fieldset class="fieldset bg-base-100 border-base-300 roundoed-box w-full border p-4"><legend class="fieldset-legend text-lg">Stop/Pause Notes</legend> <!></fieldset>'),Jl=Y('<div class="card bg-base-300 my-2 flex flex-col p-4"><div class="flex w-full flex-row justify-between"><p class="badge badge-primary badge-xl"><!> </p> <p class="badge badge-secondary badge-xl"><!> </p> <p class="badge badge-info badge-xl"><!> </p> <button class="btn btn-warning btn-sm"><!></button></div> <!> <!></div>');function Kl(a,e){Be(e,!0);let l=U(e.round);var s=Jl(),n=i(s),v=i(n),u=i(v);oe(u,{icon:Rl});var g=o(u,1,!0);r(v);var w=o(v,2),h=i(w);oe(h,{icon:Ct});const y=we(()=>new Date(l.startTime).getHours().toString().padStart(2,"0")??""),A=we(()=>new Date(l.startTime).getMinutes().toString().padStart(2,"0")??"");var b=o(h);z(()=>N(b,`${t(y)}:${t(A)}`)),r(w);var T=o(w,2),p=i(T);oe(p,{icon:Nl});var H=o(p,1,!0);r(T);var P=o(T,2);P.__click=[Xl,e];var m=i(P);oe(m,{icon:ba,scale:"1.5x"}),r(P),r(n);var X=o(n,2);fe(X,17,()=>l.buggies,be,(k,D)=>{var ce=we(()=>new Date(l.startTime));Ml(k,{get name(){return t(D).name},get buggies(){return t(D).buggies},get startTime(){return t(ce)}})});var B=o(X,2);Te(B,()=>l.notes.length>0,k=>{var D=Gl(),ce=o(i(D),2);fe(ce,17,()=>l.notes,be,($,Q)=>{var ee=ql(),me=Le(ee),pe=i(me);z(()=>N(pe,`${(t(Q).stopOrPause?"Stop":"Pause")??""} at ${new Date(t(Q).time).toLocaleTimeString()??""}`)),r(me);var xe=o(me,2);ze(xe),et(xe,()=>t(Q).info,S=>t(Q).info=S),E($,ee)}),r(D),E(k,D)}),r(s),z(()=>{N(g,l.team),N(H,l.didID?"Y":"N")}),E(a,s),je()}at(["click"]);var Vl=Y('<div class="row-span-3 flex flex-col overflow-scroll"></div>');function Ql(a,e){Be(e,!0);let l=ut("buggy",[]);ut("config",[]);let s=u=>{let g=$e(l.value);g.splice(g.length-1-u,1),l.value=g},n=(u,g)=>{l.value[u]=g};var v=Vl();fe(v,21,()=>l.value.toReversed(),be,(u,g,w)=>{var h=we(()=>l.value.length-w);Kl(u,{get round(){return l.value[w]},get idx(){return t(h)},removeEntry:s,updateEntry:n})}),r(v),E(a,v),je()}var Wl=(a,e)=>e(),Zl=(a,e,l,s)=>e(t(l),s),$l=Y("<option> </option>"),er=Y('<div class="card bg-neutral card-md w-full"><div class="card-body flex w-full flex-row items-baseline justify-between py-2"><span class="text-xl"> </span> <div class="flex w-1/3 flex-row justify-between"><button class="btn btn-sm btn-info min-w-[1rem]"><!></button> <button class="btn btn-sm btn-info color-white"><!></button></div></div></div>'),tr=(a,e,l,s)=>e(t(l),s),ar=Y("<option> </option>"),lr=Y('<div class="card bg-neutral card-md w-full"><div class="card-body flex w-full flex-row items-baseline justify-between py-2"><span class="text-xl"> </span> <div class="flex w-1/3 flex-row justify-between"><button class="btn btn-sm btn-info min-w-[1rem]"><!></button> <button class="btn btn-sm btn-info color-white"><!></button></div></div></div>'),rr=Y("<option> </option>"),sr=(a,e,l,s,n,v)=>{t(e).length>0&&t(l).length>0&&t(s).length>0&&(n.push({name:t(e),callsign:t(l),lastId:new Date().toUTCString(),station:t(s),isPrimary:t(v)}),_(e,""),_(l,""),_(s,""),_(v,!1))},ir=Y('<div class="card bg-neutral card-md w-full"><div class="card-body flex w-full flex-row items-baseline justify-between py-2"><div class="flex h-full w-2/3 flex-col"><div class="flex flex-row items-center justify-start gap-2"><!> <span class="overflow-x-scroll text-lg"> </span></div> <div class="flex flex-row items-center justify-start gap-2"><!> <span class="overflow-x-scroll text-lg"> </span></div> <div class="flex flex-row items-center justify-start gap-2"><!> <span class="overflow-x-scroll text-lg"> </span></div></div> <div class="flex h-full w-1/3 flex-col justify-between gap-1"><button class="btn btn-xs btn-error min-w-[1rem] grow-1"><!></button> <button class="btn btn-sm btn-info grow-2"><!></button></div></div></div>'),nr=Y("<option> </option>"),or=(a,e,l,s,n,v,u,g)=>{e[t(l)]={name:t(s),callsign:t(n),station:t(v),lastId:t(u).lastId,isPrimary:t(g)},_(s,""),_(n,""),_(v,""),_(g,!1)},cr=Y("<option> </option>"),dr=(a,e)=>e(),vr=Y('<div class="row-span-3 flex flex-col overflow-scroll"><div class="mx-auto w-7/8"><button class="btn btn-primary btn-block mt-4 w-full text-xl">Save</button> <div role="alert" class="alert alert-error mt-2 mb-1 py-1"><!> <span class="text-lg"> </span></div> <fieldset class="fieldset bg-base-200 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg">Teams</legend> <label id="org-select" class="fieldset-label text-base">Select Orgs</label> <select id="org-select" class="select select-lg" multiple></select> <label id="org-select" class="fieldset-label text-base">Set Roll Order</label> <div class="flex flex-col gap-2"></div></fieldset> <fieldset class="fieldset bg-base-200 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg">Stations</legend> <label id="org-select" class="fieldset-label text-base">Select Stations</label> <select id="org-select" class="select select-lg" multiple></select> <label id="org-select" class="fieldset-label text-base">Set Station Order</label> <div class="flex flex-col gap-2"></div></fieldset> <fieldset class="fieldset bg-base-200 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg">Operators</legend> <fieldset class="fieldset bg-base-100 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg">Add Operator</legend> <label id="org-select" class="fieldset-label text-base">Operator Name</label> <input type="text" class="input"> <label id="org-select" class="fieldset-label text-base">Operator Callsign</label> <input type="text" class="input"> <label id="org-select" class="fieldset-label text-base">Select Station</label> <select class="select"><!><option>Rover</option></select> <label class="fieldset-label text-base">Should be primary? <input type="checkbox" class="toggle toggle-xl bg-transparent! bg-none"></label> <button class="btn btn-secondary btn-block">Save Operator</button></fieldset> <label id="org-select" class="fieldset-label text-base">Assign Operators</label> <div class="flex flex-col gap-2"></div> <dialog class="modal"><div class="modal-box"><fieldset class="fieldset bg-base-100 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg">Edit Operator</legend> <label id="org-select" class="fieldset-label text-base">Operator Name</label> <input type="text" class="input"> <label id="org-select" class="fieldset-label text-base">Operator Callsign</label> <input type="text" class="input"> <label id="org-select" class="fieldset-label text-base">Select Station</label> <select class="select"><!><option>Rover</option></select> <label class="fieldset-label text-base">Should be primary? <input type="checkbox" class="toggle toggle-xl bg-transparent! bg-none"></label> <form method="dialog"><button class="btn btn-secondary btn-block">Save Operator</button></form></fieldset></div></dialog></fieldset> <fieldset class="fieldset bg-base-200 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg">Misc</legend> <label class="fieldset-label text-lg">Show Images <input type="checkbox" class="toggle toggle-xl bg-transparent! bg-none"></label> <label class="fieldset-label text-base">Select Theme</label> <select class="select select-lg"><option selected>default</option><!></select> <label class="fieldset-label text-base">Export Password</label> <input type="text" class="input"></fieldset> <button class="btn btn-error btn-block mt-7 w-full text-xl">Clear ALL Data</button></div></div>');function ur(a,e){Be(e,!0);let l=le(e,"config",7),s=le(e,"selectedTheme",15),n=ut("buggy",[]),v=F(U(l().value.teams)),u=U(l().value.teams),g=F(U(l().value.stations)),w=U(l().value.stations),h=F(U(l().value.showImages)),y=U(l().value.operators),A=F(U(l().value.exportPassword)),b=F(""),T=F(""),p=F(""),H=F(!1),P=F(void 0),m=F(void 0),X=F(void 0),B=F(""),k=["AEPi","Apex","Atlas","CIA","DG","Fringe","PiKA","Robobuggy","SAE","SDC","SigEp","SigNu","Spirit"],D=["Net","Panther","Chute","Start","Finish","Broadcast","TV","Westinghouse","Monument","Scaife","Chair Shadow","Safety Shadow"],ce=["light","dark","cupcake","bumblebee","emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autum","business","acid","lemonade","night","coffee","winter","dim","nord","sunset","caramellatte","abyss","silk"];function $(c,d,f){for(;d<0;)d+=c.length;for(;f<0;)f+=c.length;if(f>=c.length)for(var x=f-c.length+1;(x-=1)+1;)c.push(void 0);return c.splice(f,0,c.splice(d,1)[0]),c}function Q(c,d){$(c,d,Math.max(d-1,0))}function ee(c,d){$(c,d,Math.min(d+1,c.length-1))}function me(c,d){d.forEach(f=>{c.includes(f)||d.splice(d.indexOf(f),1)}),c.forEach(f=>{d.includes(f)||d.push(f)})}let pe=()=>{l().value={stations:[],teams:[],operators:[],theme:"dark",showImages:!1,nextIDRoundTime:new Date().toUTCString(),startTime:new Date().toUTCString()},n.value=[]};async function xe(){let c=!0;if(w.forEach(d=>{let f=!1;y.forEach(x=>{x.station==d&&x.isPrimary&&(f=!0)}),c=c&&f}),c){l().value.teams=u,l().value.stations=w,l().value.operators=y,l().value.theme=s(),l().value.showImages=t(h),l().value.exportPassword=t(A),_(B,"");let d=new Date,f={sheetId:"Rolls "+(d.getMonth()+1).toString()+"_"+d.getDate().toString()};try{const x=await fetch("https://buggyapp.kandasamyc.com/createSheet",{method:"POST",headers:{"Auth-Code":l().value.exportPassword},body:JSON.stringify(f)})}catch{console.log("Post error")}}else _(B,"All stations need primary operator")}var S=vr(),M=i(S),L=i(M);L.__click=[Wl,xe];var W=o(L,2),j=i(W);oe(j,{icon:Yl});var re=o(j,2),C=i(re,!0);r(re),r(W);var O=o(W,2),q=o(i(O),4);q.__change=[Zl,me,v,u],fe(q,21,()=>k,be,(c,d)=>{var f=$l(),x={},I=i(f,!0);r(f),z(()=>{Z(f,"id",t(d)),x!==(x=t(d))&&(f.value=(f.__value=t(d))==null?"":t(d)),N(I,t(d))}),E(c,f)}),r(q);var de=o(q,4);fe(de,21,()=>u,be,(c,d,f)=>{var x=er(),I=i(x),J=i(I),K=i(J,!0);r(J);var V=o(J,2),_e=i(V);_e.__click=()=>Q(u,f);var Me=i(_e);oe(Me,{icon:ra,scale:1.2,class:"bg-light"}),r(_e);var ue=o(_e,2);ue.__click=()=>ee(u,f);var G=i(ue);oe(G,{icon:la,scale:1.2,class:"bg-light"}),r(ue),r(V),r(I),r(x),z(()=>N(K,t(d))),E(c,x)}),r(de),r(O);var se=o(O,2),te=o(i(se),4);te.__change=[tr,me,g,w],fe(te,21,()=>D,be,(c,d)=>{var f=ar(),x={},I=i(f,!0);r(f),z(()=>{Z(f,"id",t(d)),x!==(x=t(d))&&(f.value=(f.__value=t(d))==null?"":t(d)),N(I,t(d))}),E(c,f)}),r(te);var ye=o(te,4);fe(ye,21,()=>w,be,(c,d,f)=>{var x=lr(),I=i(x),J=i(I),K=i(J,!0);r(J);var V=o(J,2),_e=i(V);_e.__click=()=>Q(w,f);var Me=i(_e);oe(Me,{icon:ra,scale:1.2,class:"bg-light"}),r(_e);var ue=o(_e,2);ue.__click=()=>ee(w,f);var G=i(ue);oe(G,{icon:la,scale:1.2,class:"bg-light"}),r(ue),r(V),r(I),r(x),z(()=>N(K,t(d))),E(c,x)}),r(ye),r(se);var ne=o(se,2),ve=o(i(ne),2),ae=o(i(ve),4);ze(ae);var ge=o(ae,4);ze(ge);var Se=o(ge,4),De=i(Se);fe(De,17,()=>w,be,(c,d)=>{var f=rr(),x={},I=i(f,!0);r(f),z(()=>{Z(f,"id",t(d)),x!==(x=t(d))&&(f.value=(f.__value=t(d))==null?"":t(d)),N(I,t(d))}),E(c,f)}),We(),r(Se);var he=o(Se,2),ke=o(i(he));ze(ke),r(he);var Ie=o(he,2);Ie.__click=[sr,b,T,p,y,H],r(ve);var Ae=o(ve,4);fe(Ae,21,()=>y,be,(c,d,f)=>{var x=ir(),I=i(x),J=i(I),K=i(J),V=i(K),_e=we(()=>`w-1/8  ${(t(d).isPrimary?"text-info":"")??""}`);oe(V,{icon:xt,get class(){return t(_e)}});var Me=o(V,2),ue=i(Me,!0);r(Me),r(K);var G=o(K,2),Pe=i(G);oe(Pe,{icon:Ot,class:"w-1/8"});var Ye=o(Pe,2),wt=i(Ye,!0);r(Ye),r(G);var Bt=o(G,2),jt=i(Bt);oe(jt,{icon:Ul,class:"w-1/8"});var Ut=o(jt,2),ma=i(Ut,!0);r(Ut),r(Bt),r(J);var Yt=o(J,2),_t=i(Yt);_t.__click=()=>y.splice(f,1);var pa=i(_t);oe(pa,{icon:ba,scale:1.2}),r(_t);var yt=o(_t,2);yt.__click=()=>{_(m,U(t(d))),_(b,U(t(m).name)),_(T,U(t(m).callsign)),_(p,U(t(m).station)),_(H,U(t(m).isPrimary)),_(X,U(f)),t(P).showModal()};var xa=i(yt);oe(xa,{icon:Ol,scale:1.2}),r(yt),r(Yt),r(I),r(x),z(()=>{N(ue,t(d).name),N(wt,t(d).callsign),N(ma,t(d).station)}),E(c,x)}),r(Ae);var Oe=o(Ae,2),Ze=i(Oe),qe=i(Ze),Fe=o(i(qe),4);ze(Fe);var Ue=o(Fe,4);ze(Ue);var He=o(Ue,4),lt=i(He);fe(lt,17,()=>w,be,(c,d)=>{var f=nr(),x={},I=i(f,!0);r(f),z(()=>{Z(f,"id",t(d)),x!==(x=t(d))&&(f.value=(f.__value=t(d))==null?"":t(d)),N(I,t(d))}),E(c,f)}),We(),r(He);var Ge=o(He,2),Je=o(i(Ge));ze(Je),r(Ge);var Re=o(Ge,2),nt=i(Re);nt.__click=[or,y,X,b,T,p,m,H],r(Re),r(qe),r(Ze),r(Oe),it(Oe,c=>_(P,c),()=>t(P)),r(ne);var Ne=o(ne,2),ot=o(i(Ne),2),Ke=o(i(ot));ze(Ke),r(ot);var rt=o(ot,4),st=o(i(rt));fe(st,17,()=>ce,be,(c,d)=>{var f=cr(),x={},I=i(f,!0);r(f),z(()=>{Z(f,"id",t(d)),x!==(x=t(d))&&(f.value=(f.__value=t(d))==null?"":t(d)),N(I,t(d))}),E(c,f)}),r(rt);var gt=o(rt,4);ze(gt),r(Ne);var R=o(Ne,2);R.__click=[dr,pe],r(M),r(S),z(()=>{ie(W,"hidden",t(B).length==0),N(C,t(B)),ke.disabled=t(p)=="Rover"}),Xe(q,()=>t(v),c=>_(v,c)),Xe(te,()=>t(g),c=>_(g,c)),et(ae,()=>t(b),c=>_(b,c)),et(ge,()=>t(T),c=>_(T,c)),Xe(Se,()=>t(p),c=>_(p,c)),Et(ke,()=>t(H),c=>_(H,c)),et(Fe,()=>t(b),c=>_(b,c)),et(Ue,()=>t(T),c=>_(T,c)),Xe(He,()=>t(p),c=>_(p,c)),Et(Je,()=>t(H),c=>_(H,c)),Et(Ke,()=>t(h),c=>_(h,c)),Xe(rt,s),et(gt,()=>t(A),c=>_(A,c)),E(a,S),je()}at(["click","change"]);var fr=Y("<div></div>"),gr=(a,e)=>e.idFunc(e.idx),_r=Y('<div class="flex h-full w-1/2 flex-col justify-between gap-1"><div class="flex min-w-[1rem] grow-1 flex-row items-center gap-2"><div class="inline-grid *:[grid-area:1/1]"><!> <div></div></div> <span class=" text-base"> </span></div> <button>ID</button></div>');function sa(a,e){Be(e,!0);let l=F(U(new Date)),s=we(()=>Math.max(Math.floor((t(l)-new Date(e.lastId))/6e4),0)),n=8,v=12;setTimeout(()=>_(l,U(new Date)),6e4);var u=_r(),g=i(u),w=i(g),h=i(w);Te(h,()=>t(s)>=n,p=>{var H=fr();z(()=>Ce(H,`status ${(t(s)>=v?"status-error":t(s)>=n?"status-warning":"status-success")??""} animate-ping`)),E(p,H)});var y=o(h,2);r(w);var A=o(w,2),b=i(A);r(A),r(g);var T=o(g,2);T.__click=[gr,e],r(u),z(()=>{Ce(y,`status ${(t(s)>=v?"status-error":t(s)>=n?"status-warning":"status-success")??""}`),N(b,`ID'd ${t(s)??""}m ago`),Ce(T,`btn btn-block btn-lg mb-1 grow-1 ${(t(s)>=n?"btn-primary":"btn-secondary")??""}`)}),E(a,u),je()}at(["click"]);var br=Y("<option> </option>"),mr=Y("<option> </option>"),pr=(a,e)=>t(e).showModal(),xr=Y("<div></div>"),hr=Y('<div class="card bg-neutral card-md w-full"><div class="card-body flex w-full flex-row items-baseline justify-between py-2"><div class="flex h-full w-1/2 flex-col"><div class="flex flex-row items-center justify-start gap-2"><!> <span class="overflow-x-scroll text-lg"> </span></div> <div class="flex flex-row items-center justify-start gap-2"><!> <span class="overflow-x-scroll text-lg"> </span></div> <div class="flex flex-row items-center justify-start gap-2"><!> <span class="overflow-x-scroll text-lg"> </span></div></div> <!></div></div>'),wr=Y('<fieldset class="fieldset bg-base-200 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg"><div class="flex min-w-[1rem] grow-1 flex-row items-center gap-2"><div class="inline-grid *:[grid-area:1/1]"><!> <div></div></div> <span class=" text-base"> </span></div></legend> <label class="fieldset-label text-base">Individual Statuses</label> <div class="flex flex-col gap-2"></div></fieldset>'),yr=Y('<div class="card bg-neutral card-md w-full"><div class="card-body flex w-full flex-row items-baseline justify-between py-2"><div class="flex h-full w-1/2 flex-col"><div class="flex flex-row items-center justify-start gap-2"><!> <span class="overflow-x-scroll text-lg"> </span></div> <div class="flex flex-row items-center justify-start gap-2"><!> <span class="overflow-x-scroll text-lg"> </span></div> <div class="flex flex-row items-center justify-start gap-2"><!> <span class="overflow-x-scroll text-lg"> </span></div></div> <!></div></div>'),Sr=Y('<div class="row-span-3 flex flex-col overflow-scroll"><dialog class="modal"><div class="modal-box"><fieldset class="fieldset bg-base-100 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg">Quick Swap</legend> <label class="fieldset-label text-base">First Operator</label> <select class="select select-lg"></select> <label class="fieldset-label text-base">Second Operator</label> <select class="select select-lg"></select> <form method="dialog"><button class="btn btn-primary btn-block my-2">Swap</button> <button class="btn btn-error btn-block">Cancel</button></form></fieldset></div></dialog> <div class="mx-auto w-7/8"><button class="btn btn-block btn-secondary">Quick Swap</button> <!> <fieldset class="fieldset bg-base-200 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg"><div class="flex min-w-[1rem] grow-1 flex-row items-center gap-2"><div class="inline-grid *:[grid-area:1/1]"><div></div> <div></div></div> <span class=" text-base">Rover Operators</span></div></legend> <label class="fieldset-label text-base">Individual Statuses</label> <div class="flex flex-col gap-2"></div></fieldset></div></div>');function kr(a,e){Be(e,!0);let l=le(e,"config",7),s=F(""),n=F(""),v=S=>{l().value.operators[S].lastId=new Date().toUTCString()},u=S=>{let M=!1,L=!1,W=new Date;return l().value.operators.forEach(j=>{if(j.station==S){let re=Math.max(Math.floor((W-new Date(j.lastId))/6e4),0);j.isPrimary&&re>=12?M=!0:re>=12&&(L=!0)}}),M?"status-error":L?"status-warning":"status-success"},g=we(()=>l().value.stations.map(u)),w=we(()=>u("Rover")),h=F(void 0),y=()=>{if(t(s)==t(n))return;let S=l().value.operators.find(j=>j.callsign==t(s)),M=l().value.operators.find(j=>j.callsign==t(n)),L=S.station,W=S.isPrimary;S.station=M.station,S.isPrimary=M.isPrimary,M.station=L,M.isPrimary=W,l().value.operators=l().value.operators.map(j=>j.callsign==S.callsign?S:j.callsign==M.callsign?M:j)};var A=Sr(),b=i(A),T=i(b),p=i(T),H=o(i(p),4);fe(H,21,()=>l().value.operators,be,(S,M)=>{var L=br(),W={},j=i(L);r(L),z(()=>{W!==(W=t(M).callsign)&&(L.value=(L.__value=t(M).callsign)==null?"":t(M).callsign),N(j,`${t(M).name??""} (${(t(M).isPrimary?"Primary at ":"")??""}${t(M).station??""})`)}),E(S,L)}),r(H);var P=o(H,4);fe(P,21,()=>l().value.operators,be,(S,M)=>{var L=mr(),W={},j=i(L);r(L),z(()=>{W!==(W=t(M).callsign)&&(L.value=(L.__value=t(M).callsign)==null?"":t(M).callsign),N(j,`${t(M).name??""} (${(t(M).isPrimary?"Primary at":"")??""} ${t(M).station??""})`)}),E(S,L)}),r(P);var m=o(P,2),X=i(m);X.__click=y,We(2),r(m),r(p),r(T),r(b),it(b,S=>_(h,S),()=>t(h));var B=o(b,2),k=i(B);k.__click=[pr,h];var D=o(k,2);fe(D,17,()=>l().value.stations,be,(S,M,L)=>{var W=wr(),j=i(W),re=i(j),C=i(re),O=i(C);Te(O,()=>t(g)[L]=="status-error",ye=>{var ne=xr();z(()=>Ce(ne,`status ${t(g)[L]??""} animate-ping`)),E(ye,ne)});var q=o(O,2);r(C);var de=o(C,2),se=i(de);r(de),r(re),r(j);var te=o(j,4);fe(te,21,()=>l().value.operators,be,(ye,ne,ve)=>{var ae=tt(),ge=Le(ae);Te(ge,()=>t(ne).station==t(M),Se=>{var De=hr(),he=i(De),ke=i(he),Ie=i(ke),Ae=i(Ie),Oe=we(()=>`w-1/8 ${(t(ne).isPrimary?"text-info":"")??""}`);oe(Ae,{icon:xt,get class(){return t(Oe)}});var Ze=o(Ae,2),qe=i(Ze,!0);r(Ze),r(Ie);var Fe=o(Ie,2),Ue=i(Fe);oe(Ue,{icon:Ot,class:"w-1/8"});var He=o(Ue,2),lt=i(He,!0);r(He),r(Fe);var Ge=o(Fe,2),Je=i(Ge);oe(Je,{icon:Ct,class:"w-1/8"});var Re=o(Je,2),nt=i(Re,!0);z(()=>N(nt,new Date(t(ne).lastId).toLocaleTimeString())),r(Re),r(Ge),r(ke);var Ne=o(ke,2);sa(Ne,{get lastId(){return t(ne).lastId},idx:ve,idFunc:v}),r(he),r(De),z(()=>{N(qe,t(ne).name),N(lt,t(ne).callsign)}),E(Se,De)}),E(ye,ae)}),r(te),r(W),z(()=>{Ce(q,`status ${t(g)[L]??""}`),N(se,`${t(M)??""} Operators`)}),E(S,W)});var ce=o(D,2),$=i(ce),Q=i($),ee=i(Q),me=i(ee),pe=o(me,2);r(ee),We(2),r(Q),r($);var xe=o($,4);fe(xe,21,()=>l().value.operators,be,(S,M,L)=>{var W=tt(),j=Le(W);Te(j,()=>t(M).station=="Rover",re=>{var C=yr(),O=i(C),q=i(O),de=i(q),se=i(de),te=we(()=>`w-1/8 ${(t(M).isPrimary?"text-info":"")??""}`);oe(se,{icon:xt,get class(){return t(te)}});var ye=o(se,2),ne=i(ye,!0);r(ye),r(de);var ve=o(de,2),ae=i(ve);oe(ae,{icon:Ot,class:"w-1/8"});var ge=o(ae,2),Se=i(ge,!0);r(ge),r(ve);var De=o(ve,2),he=i(De);oe(he,{icon:Ct,class:"w-1/8"});var ke=o(he,2),Ie=i(ke,!0);z(()=>N(Ie,new Date(t(M).lastId).toLocaleTimeString())),r(ke),r(De),r(q);var Ae=o(q,2);sa(Ae,{get lastId(){return t(M).lastId},idx:L,idFunc:v}),r(O),r(C),z(()=>{N(ne,t(M).name),N(Se,t(M).callsign)}),E(re,C)}),E(S,W)}),r(xe),r(ce),r(B),r(A),z(()=>{Ce(me,`status ${t(w)??""} animate-ping`),Ce(pe,`status ${t(w)??""}`)}),Xe(H,()=>t(s),S=>_(s,S)),Xe(P,()=>t(n),S=>_(n,S)),E(a,A),je()}at(["click"]);var Tr=Y('<option class="p-1 text-sm"> </option>'),Dr=Y('<button class="btn btn-error h-full text-xl">Are you sure?</button>'),Ir=(a,e)=>{_(e,!0),setTimeout(()=>_(e,!1),2e3)},Mr=Y('<button class="btn btn-warning h-full text-xl">Clear Data</button>'),Er=Y("<button>Copy Data To Clipboard</button> <button>Export Data</button> <!>",1),Ar=Y('<button class="btn btn-warning h-full text-xl"> </button> <button class="btn h-full text-xl"> </button> <button class="btn btn-secondary h-full text-xl"> </button>',1),Pr=Y('<label id="org-select" class="fieldset-label text-base"> </label> <input type="text" class="input">',1),Lr=(a,e)=>{_(e,!1)},Cr=(a,e)=>_(e,0),Or=(a,e)=>_(e,1),Rr=(a,e)=>_(e,2),Nr=(a,e)=>_(e,3),zr=Y('<input type="radio" name="theme-dropdown" class="theme-controller btn btn-sm btn-block btn-ghost hidden w-full justify-start" checked> <div class="h-svh w-full px-2 py-2"><div class="grid h-full grid-flow-col grid-rows-12 gap-0 text-2xl"><div id="header-row" class="row-span-1 grid grid-flow-col grid-cols-3 grid-rows-4 gap-x-3"><select class="bg-base-300 form-select col-span-1 row-span-4 h-full w-full rounded-md border-0 text-lg"></select> <p class="col-span-1 col-start-2 row-span-2 row-start-2 text-center text-xl"> </p> <div class="col-span-1 col-start-3 row-span-4 mr-2"><button class="btn h-full w-full touch-manipulation text-lg"> </button></div></div> <div id="content-row"><!></div> <div id="settings-row"><!></div> <dialog class="modal"><div class="modal-box"><fieldset class="fieldset bg-base-100 border-base-300 rounded-box w-full border p-4"><legend class="fieldset-legend text-lg">Stop/Pause Notes</legend> <!> <form method="dialog"><button class="btn btn-secondary btn-block">Close</button></form></fieldset></div></dialog></div> <div class="dock bg-base-300 max-h-1/11 pt-0.5"><button class="my-auto inline-flex items-center rounded-md text-xl"><!> <span class="dock-label text-sm!">Settings</span></button> <button class="my-auto inline-flex items-center rounded-md text-xl"><!> <span class="dock-label text-sm!">Home</span></button> <button class="my-auto inline-flex items-center rounded-md text-xl"><!> <span class="dock-label text-sm!">Data</span></button> <button class="my-auto inline-flex items-center rounded-md text-xl"><!> <span class="dock-label text-sm!">Operators</span></button></div></div>',1);function Xr(a,e){Be(e,!0);let l=ut("buggy",[]),s=ut("config",{stations:[],teams:[],operators:[],theme:"dark",showImages:!1,nextIDRoundTime:new Date().toUTCString(),startTime:new Date().toUTCString()}),n=F(U(s.value.theme)),v=F(1),u=F(void 0),g=F(0),w=F(U([])),h=we(()=>new Date(s.value.startTime)),y=0,A=F(0),b=F(!0),T=!1,p=F(!1),H=F(!1),P=F(!1),m=F(!1),X=F(!1),B=F(U(s.value.stations.map(R=>({name:R,buggies:[],followCarSeen:!1})))),k=F(U([])),D=F(U(s.value.stations.map(()=>!1))),ce=we(()=>s.value.teams),$=F(!1),Q=F(!1),ee=U([]),me=we(()=>s.value.exportPassword!=""),pe=F(U(s.value.teams.length>0?s.value.teams[0]:"N/A")),xe=R=>c=>{s.value.operators=s.value.operators.map(d=>(d.station==R&&d.isPrimary&&(d.lastId=c),d))},S=()=>{y=setInterval(()=>{_(A,new Date-t(h))},1e3)},M=()=>{let R=new Date;s.value.nextIDRoundTime=new Date(R.getTime()+10*6e4).toUTCString(),_(b,!t(b))},L=R=>{clearInterval(y),_(A,0);let c={buggies:$e(t(B)),team:$e(t(pe)),startTime:$e(t(h)),notes:$e(t(k)),didId:!1};if(c.operators=s.value.stations.map(d=>s.value.operators.find(f=>f.station==d&&f.isPrimary).callsign),t(D).forEach(d=>{d&&(c.didId=!0)}),R){_(pe,U(t(ce)[(t(ce).indexOf(t(pe))+1)%t(ce).length]));let d=$e(l.value);d.push(c),l.value=d}_(B,U(s.value.stations.map(d=>({name:d,buggies:[],followCarSeen:!1})))),_(D,U(s.value.stations.map(()=>!1))),_(k,U([]))};async function W(){try{await navigator.clipboard.writeText(JSON.stringify($e(l.value),null,4)),_(H,!0),_(P,!1)}catch(R){console.error(R.message),_(H,!0),_(P,!0),setInterval(()=>{_(H,!1),_(P,!1)},1500)}}function j(R,c={timeframe:300}){const d="tapOrPress";let x=!1,I,J,K,V=!1;function _e(Pe){R.dispatchEvent(new CustomEvent(d,{detail:{newState:Pe}}))}function Me(Pe,Ye){clearTimeout(K),x&&c.handler(V),x=!1,V=!1}function ue(Pe,Ye){return x&&I*I+J*J>=20&&(x=!1),!1}function G(Pe,Ye){x||(x=!0,I=Ye.clientX,J=Ye.clientY),K=setTimeout(()=>{V=!0,_e(!0)},c.timeframe)}return _a(d,R,ue,G,Me)}let re=R=>{R?L(!1):t(w).length>0?ee[t(w).pop()].removeLastBuggy():console.log("empty"),_(Q,!1)},C=R=>{let c={stopOrPause:!t($),time:new Date().toUTCString(),info:""};t(k).push(c),t(u).showModal()},O=(R,c,d)=>{if(c.number=="1"||c.number=="F"){let f=new Date(c.time)-R,x=Math.ceil(f/1e3)%60;return`@${Math.floor(Math.max(f/1e3-x,0)/60)}:${String(x).padStart(2,"0")}`}else{let f=d[d.indexOf(c)-1],x=new Date(c.time)-new Date(f.time),I=x/1e3%60;return`+${Math.floor(Math.max(x/1e3-I,0)/60)}:${String(Math.floor(I)).padStart(2,"0")}`}},q=async()=>{let c=[["Position","Call","Name"]].concat(s.value.operators.map(K=>[K.station+(K.isPrimary?" (Primary)":""),K.callsign,K.name])),d=[["Buggy"].concat(s.value.stations)],f=s.value.stations.map(()=>""),x=l.value.reduce((K,V)=>{let _e=[[new Date(V.startTime).toLocaleTimeString(),"@",V.team]],Me=["Operators"].concat(V.operators),ue=V.buggies[0].buggies.map(G=>[G.number].concat(f));return V.buggies.forEach((G,Pe)=>{G.length>0&&(new Date(G.buggies[0].time),G.buggies.forEach((Ye,wt)=>{ue[wt][Pe+1]=O(new Date(V.startTime),Ye,G.buggies)}))}),V.notes.forEach((G,Pe)=>{Pe==0&&ue[0].push("Notes"),ue[0].push((G.stopOrPause?"Stop":"Pause")+" at "+new Date(G.time).toLocaleString()),ue[1].push(G.info)}),K.concat(_e.concat([Me]).concat(d).concat(ue))},[]),I=new Date,J={data:c.concat([[]].concat(x)),sheetId:"Rolls "+(I.getMonth()+1).toString()+"_"+I.getDate().toString()};try{(await fetch("https://buggyapp.kandasamyc.com/updateData",{method:"POST",headers:{"Auth-Code":s.value.exportPassword},body:JSON.stringify(J)})).ok?(_(m,!0),_(X,!1)):(_(m,!0),_(X,!0))}catch{_(m,!0),_(X,!0)}setTimeout(()=>{_(m,!1)},3e3)},de=R=>{let c=Math.ceil(R/1e3)%60;return`${Math.floor(Math.max(R/1e3-c,0)/60)}:${String(c).padStart(2,"0")}`};var se=zr(),te=Le(se);ze(te);var ye=o(te,2),ne=i(ye),ve=i(ne),ae=i(ve);fe(ae,21,()=>t(ce),be,(R,c)=>{var d=Tr(),f={},x=i(d,!0);r(d),z(()=>{f!==(f=t(c))&&(d.value=(d.__value=t(c))==null?"":t(c)),N(x,t(c))}),E(R,d)}),r(ae);var ge=o(ae,2),Se=i(ge);z(()=>N(Se,`Round Timer: ${de(t(A))??""}`)),r(ge);var De=o(ge,2),he=i(De),ke=i(he,!0);r(he),Lt(he,(R,c)=>j(R,c),()=>({handler:re,timeframe:300})),r(De),r(ve);var Ie=o(ve,2),Ae=i(Ie);Te(Ae,()=>t(v)==2,R=>{Ql(R,{get exportError(){return t(X)},set exportError(c){_(X,U(c))},get exportSubmitted(){return t(m)},set exportSubmitted(c){_(m,U(c))}})},R=>{var c=tt(),d=Le(c);Te(d,()=>t(v)==1,f=>{var x=tt(),I=Le(x);fe(I,17,()=>t(B),be,(J,K,V)=>{var _e=we(()=>t(g)!=0?V==0?6:t(B)[V-1].buggies.length:0),Me=we(()=>t(g)!=0?V>0?t(B)[V-1].followCarSeen:!0:!1),ue=we(()=>xe(s.value.stations[V]));it(Tl(J,{get name(){return s.value.stations[V]},get buggies(){return t(K).buggies},set buggies(G){t(K).buggies=G},get idHidden(){return t(b)},get maxBuggies(){return t(_e)},get startTime(){return t(h)},get followRecorded(){return t(K).followCarSeen},set followRecorded(G){t(K).followCarSeen=G},get prevFollowRecorded(){return t(Me)},get didID(){return t(D)[V]},set didID(G){t(D)[V]=G},get operatorLastIdUpdateFunc(){return t(ue)},get undoList(){return t(w)},set undoList(G){_(w,U(G))},idx:V,get config(){return s},set config(G){s=G}}),(G,Pe)=>ee[Pe]=G,G=>ee==null?void 0:ee[G],()=>[V])}),E(f,x)},f=>{var x=tt(),I=Le(x);Te(I,()=>t(v)==3,J=>{kr(J,{config:s,buggy:l})},J=>{ur(J,{config:s,get selectedTheme(){return t(n)},set selectedTheme(K){_(n,U(K))}})},!0),E(f,x)},!0),E(R,c)}),r(Ie);var Oe=o(Ie,2),Ze=i(Oe);Te(Ze,()=>t(v)==2,R=>{var c=Er(),d=Le(c);d.__click=W;var f=o(d,2);f.__click=q;var x=o(f,2);Te(x,()=>t(p),I=>{var J=Dr();J.__click=()=>{_(p,!1),l.value=[]},E(I,J)},I=>{var J=Mr();J.__click=[Ir,p],E(I,J)}),z(()=>{Ce(d,`btn ${(t(H)?t(P)?"btn-error":"btn-success":"btn-secondary")??""} h-full text-xl`),Ce(f,`btn ${(t(m)?t(X)?"btn-error":"btn-success":"btn-primary")??""} h-full text-xl`),ie(f,"btn-disabled",!t(me))}),E(R,c)},R=>{var c=tt(),d=Le(c);Te(d,()=>t(v)==1,f=>{var x=Ar(),I=Le(x),J=i(I);r(I),Lt(I,(ue,G)=>j(ue,G),()=>({timeframe:300,handler:C}));var K=o(I,2);K.__click=()=>{t(g)>0?L(!0):(s.value.startTime=new Date().toUTCString(),S()),_(g,U(t(g)==0?1:0))};var V=i(K,!0);r(K);var _e=o(K,2);_e.__click=M;var Me=i(_e);r(_e),z(()=>{ie(I,"btn-error",t(g)>0&&!t($)),ie(I,"btn-warning",t(g)>0&&t($)),ie(I,"btn-disabled",t(g)==0),N(J,`Record ${(t($)?"Pause":"Stop")??""}`),ie(K,"btn-success",t(g)>0),ie(K,"btn-primary",t(g)==0),ie(K,"btn-disabled",t(g)>0&&!t(B)[ee.length-1].followCarSeen&&t(k).length==0),N(V,t(g)>0?"Mark Clear":"Start Round"),_e.disabled=T,N(Me,`${(t(b)?"Enable":"Hide")??""} IDing`)}),Pt("tapOrPress",I,ue=>{_($,U(ue))}),E(f,x)},null,!0),E(R,c)}),r(Oe);var qe=o(Oe,2),Fe=i(qe),Ue=i(Fe),He=o(i(Ue),2);fe(He,17,()=>t(k),be,(R,c)=>{var d=Pr(),f=Le(d),x=i(f);z(()=>N(x,`${(t(c).stopOrPause?"Stop":"Pause")??""} at ${new Date(t(c).time).toLocaleTimeString()??""}`)),r(f);var I=o(f,2);ze(I),et(I,()=>t(c).info,J=>t(c).info=J),E(R,d)});var lt=o(He,2),Ge=i(lt);Ge.__click=[Lr,$],r(lt),r(Ue),r(Fe),r(qe),it(qe,R=>_(u,R),()=>t(u)),r(ne);var Je=o(ne,2),Re=i(Je);Re.__click=[Cr,v];var nt=i(Re);oe(nt,{icon:zl}),We(2),r(Re);var Ne=o(Re,2);Ne.__click=[Or,v];var ot=i(Ne);oe(ot,{icon:Hl}),We(2),r(Ne);var Ke=o(Ne,2);Ke.__click=[Rr,v];var rt=i(Ke);oe(rt,{icon:Bl}),We(2),r(Ke);var st=o(Ke,2);st.__click=[Nr,v];var gt=i(st);oe(gt,{icon:xt}),We(2),r(st),r(Je),r(ye),z(()=>{Z(te,"aria-label",t(n)),el(te,t(n)),ie(he,"btn-secondary",!t(Q)),ie(he,"btn-error",t(Q)),N(ke,t(Q)?"Clear":"Undo"),Ce(Ie,`flex flex-col overflow-y-auto py-3 ${(t(v)==0||t(v)==3?"row-span-10":"row-span-8")??""}`),Ce(Oe,`${(t(v)==0||t(v)==3?"hidden":"row-span-2")??""} grid grid-flow-col grid-cols-3 gap-x-3`),ie(Re,"dock-active",t(v)==0),ie(Ne,"dock-active",t(v)==1),ie(Ke,"dock-active",t(v)==2),ie(st,"dock-active",t(v)==3)}),Xe(ae,()=>t(pe),R=>_(pe,R)),Pt("tapOrPress",he,R=>{_(Q,U(R.detail.newState))}),E(a,se),je()}at(["click"]);export{Xr as component};
